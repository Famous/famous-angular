/**
 * famous-angular - Allow famo.us components to work seamlessly with other components inside existing or future Angular apps
 * @version v0.0.9
 * @link https://github.com/FamousInternal/famous-angular
 * @license 
 */
"use strict";window.name="NG_DEFER_BOOTSTRAP!"+window.name;var requirements=["famous/core/Engine","famous/core/EventEmitter","famous/core/EventHandler","famous/core/Modifier","famous/core/RenderNode","famous/core/Surface","famous/core/Transform","famous/core/View","famous/core/ViewSequence","famous/events/EventArbiter","famous/events/EventFilter","famous/events/EventMapper","famous/inputs/FastClick","famous/inputs/GenericSync","famous/inputs/MouseSync","famous/inputs/PinchSync","famous/inputs/RotateSync","famous/inputs/TouchSync","famous/surfaces/ImageSurface","famous/surfaces/InputSurface","famous/transitions/Easing","famous/transitions/SpringTransition","famous/transitions/Transitionable","famous/transitions/TransitionableTransform","famous/utilities/KeyCodes","famous/utilities/Timer","famous/views/GridLayout","famous/views/RenderController","famous/views/Scroller","famous/views/Scrollview"],ngFameApp=angular.module("famous.angular",[]);require(requirements,function(){var e=arguments;ngFameApp.provider("$famous",function(){var e={};this.registerModule=function(r,t){e[r]=t},e.find=function(e){var r=angular.element(window.document.querySelector(e)),t=_.map(r,function(e){return angular.element(e).scope()}),n=_.map(t,function(e){return e.isolate[e.$id]});return n},this.$get=function(){return e}}),ngFameApp.config(["$famousProvider",function(r){for(var t=0;t<requirements.length;t++)r.registerModule(requirements[t],e[t])}]),angular.element(document).ready(function(){angular.resumeBootstrap()})}),angular.module("famous.angular").factory("$famousDecorator",function(){return{addRole:function(){},ensureIsolate:function(e){e.isolate=e.isolate||{},e.isolate[e.$id]=e.isolate[e.$id]||{};var r=e.isolate[e.$id];r.id=e.$id;var t=e.$eval("$index");return t&&"$index"!==t&&!r.index&&(r.index=t),r}}}),angular.module("famous.angular").directive("faAnimation",["$famous","$famousDecorator",function(e,r){return{restrict:"EA",scope:!0,compile:function(){var t=e["famous/core/Transform"],n=e["famous/transitions/Transitionable"],a=e["famous/transitions/Easing"];return{pre:function(e){r.ensureIsolate(e)},post:function(e,o,i){var u=r.ensureIsolate(e);setTimeout(function(){u.timeline=e.$eval(i.timeline),u._trans=new n(0),u.play=function(r){var t={duration:e.$eval(i.duration),curve:e.$eval(i.curve)||"linear"};u._trans.set(1,t,function(){r&&r(),i.loop&&setTimeout(function(){u.replay(r)},0)})},u.reset=function(){u._trans.set(0)},u.replay=function(e){u.reset(),u.play(e)};var r=void 0;i.event&&(r&&r(),r=e.$on(i.event,function(e,r){var t=r&&r.callback?r.callback:void 0;u.replay(t)}));i.id;if(void 0===u.timeline&&(u.timeline=u._trans.get.bind(u._trans),i.autoplay&&u.play()),!u.timeline instanceof Function)throw"timeline must be a reference to a function or duration must be provided";for(var s=o.find("animate"),f={},c=0;c<s.length;c++)!function(){var r=s[c];if(r.attributes.targetmodselector){var n=angular.element(o[0].parentNode)[0].querySelectorAll(r.attributes.targetmodselector.value);_.each(n,function(n){var o=angular.element(n).scope(),i=o.isolate[o.$id].modifier,s=o.isolate[o.$id].getTransform,c=r.attributes.curve&&"linear"!==r.attributes.curve.value?a[r.attributes.curve.value]:function(e){return e};if(r.attributes.field){var l=r.attributes.field.value,d=r.attributes.timelinelowerbound?parseFloat(r.attributes.timelinelowerbound.value):0,p=r.attributes.timelineupperbound?parseFloat(r.attributes.timelineupperbound.value):1;if(!r.attributes.startvalue)throw"you must provide a start value for the animation";var m=e.$eval(r.attributes.startvalue.value);if(!r.attributes.endvalue)throw"you must provide an end value for the animation";var v=e.$eval(r.attributes.endValue.value),$=f[o.$id]=f[o.$id]||{},g=$[l]=$[l]||[];g.push({field:l,lowerBound:d,upperBound:p,startValue:m,endValue:v,curve:c}),g.sort(function(e,r){return e.lowerBound-r.lowerBound});for(var h=1;h<g.length;h++)for(var y=g[h].lowerBound,w=0;h>w;w++)if(y<g[w].upperBound)throw"Animate segments have overlapping                                 domains for the same field ("+l+").                                 At any point in the timeline, only one <animate>                                 can affect a given field on the same modifier.";var S=function(){for(var e=u.timeline()||0,r=0,t=g[r],n=0;n<g.length;n++){if(e>=g[n].lowerBound&&e<=g[n].upperBound){t=g[n];break}if(n===g.length-1){t=g[n];break}if(e>=g[n].upperBound&&e<g[n+1].lowerBound){t=g[n];break}}if(e<=t.lowerBound)return t.startValue;if(e>=t.upperBound)return t.endValue;var a=t.upperBound-t.lowerBound,o=(e-t.lowerBound)/a;if(Array.isArray(t.startValue)){for(var i=[],n=0;n<t.startValue.length;n++)i.push(t.startValue[n]+t.curve(o)*(t.endValue[n]-t.startValue[n]));return i}return t.startValue+t.curve(o)*(t.endValue-t.startValue)},N=$.transformComponents=$.transformComponents||[];"opacity"===l?i.opacityFrom(function(){return S()}):"origin"===l?i.originFrom(function(){return S()}):"size"===l?i.sizeFrom(function(){return S()}):(N.push({field:l,fn:S}),i.transformFrom(function(){for(var e=s&&s()?[s()]:[],r=0;r<N.length;r++)!function(){var n=N[r].fn(),a=N[r].field;e.push(Array.isArray(n)?t[a].apply(this,n):t[a](n))}();return 1===e.length?e[0]:t.multiply.apply(this,e)}))}})}}()},1)}}}}}]),angular.module("famous.angular").directive("faApp",["$famous","$famousDecorator",function(e,r){return{template:'<div style="display: none;"><div></div></div>',transclude:!0,scope:!0,restrict:"EA",compile:function(t,n,a){return{pre:function(t,n){function a(){i.apply(this,arguments)}{var o=r.ensureIsolate(t),i=e["famous/core/View"],u=e["famous/core/Engine"];e["famous/core/Transform"]}n.append('<div class="famous-angular-container"></div>'),o.context=u.createContext(n[0].querySelector(".famous-angular-container")),a.prototype=Object.create(i.prototype),a.prototype.constructor=a;o.view=new a,o.context.add(o.view),t.$on("$destroy",function(){o.context.update=angular.noop}),t.$on("registerChild",function(e,r){o.view.add(r.renderNode),e.stopPropagation()})},post:function(e,t){var n=r.ensureIsolate(e);a(e,function(e){angular.element(t[0].querySelectorAll("div div")[0]).append(e)}),n.readyToRender=!0}}}}}]),angular.module("famous.angular").directive("faClick",["$parse","$famousDecorator",function(e,r){return{restrict:"A",compile:function(){return{post:function(t,n,a){var o=r.ensureIsolate(t);if(a.faClick){var i=o.renderNode._eventInput||o.renderNode;i.on("click",function(r){var n=e(a.faClick);n(t,{$event:r}),t.$$phase||t.$apply()})}}}}}}]),angular.module("famous.angular").directive("faGridLayout",["$famous","$famousDecorator",function(e,r){return{template:"<div></div>",restrict:"E",transclude:!0,scope:!0,compile:function(t,n,a){return{pre:function(t,n,a){var o=r.ensureIsolate(t),i=e["famous/views/GridLayout"],u=(e["famous/core/ViewSequence"],[]),s=t.$eval(a.faOptions)||{};o.renderNode=new i(s);var f=function(){u.sort(function(e,r){return e.index-r.index}),o.renderNode.sequenceFrom(_.map(u,function(e){return e.renderNode}))};t.$on("registerChild",function(e,r){e.targetScope.$id!=t.$id&&(u.push(r),f(),e.stopPropagation())}),t.$on("unregisterChild",function(e,r){e.targetScope.$id!=t.$id&&(u=_.reject(u,function(e){return e.id===r.id}),f(),e.stopPropagation())})},post:function(e,t){var n=r.ensureIsolate(e);a(e,function(e){t.find("div").append(e)}),e.$emit("registerChild",n)}}}}}]),angular.module("famous.angular").directive("faImageSurface",["$famous","$famousDecorator",function(e,r){return{scope:!0,template:'<div class="fa-image-surface"></div>',restrict:"EA",compile:function(){return{pre:function(t,n,a){{var o=r.ensureIsolate(t),i=e["famous/surfaces/ImageSurface"];e["famous/core/Transform"],e["famous/core/EventHandler"]}t.$watch(function(){return o.getProperties()},function(){o.renderNode&&o.renderNode.setProperties(o.getProperties())},!0),o.getProperties=function(){return{backgroundColor:t.$eval(a.faBackgroundColor),color:t.$eval(a.faColor)}};o.renderNode=new i({size:t.$eval(a.faSize),"class":t.$eval(a.class),properties:o.getProperties()}),a.class&&o.renderNode.setClasses(a["class"].split(" "))},post:function(e,t,n){var a=r.ensureIsolate(e),o=function(){a.renderNode.setContent(n.faImageUrl)};o(),n.$observe("faImageUrl",o),e.$emit("registerChild",a)}}}}}]),angular.module("famous.angular").directive("faIndex",["$parse","$famousDecorator",function(e,r){return{restrict:"A",scope:!1,priority:16,compile:function(){return{post:function(e,t,n){var a=r.ensureIsolate(e);a.index=e.$eval(n.faIndex),e.$watch(function(){return e.$eval(n.faIndex)},function(){a.index=e.$eval(n.faIndex)})}}}}}]),angular.module("famous.angular").directive("faModifier",["$famous","$famousDecorator",function(e,r){return{template:"<div></div>",transclude:!0,restrict:"EA",priority:2,scope:!0,compile:function(t,n,a){return{post:function(t,n,o){var i=r.ensureIsolate(t),u=e["famous/core/RenderNode"],s=e["famous/core/Modifier"],f=e["famous/core/Transform"],c=function(e){return e instanceof Function?e():e.get?e.get():e};i.getTransform=function(){var e=[];if(o.faTranslate&&t.$eval(o.faTranslate)){var r=t.$eval(o.faTranslate).map(c);e.push(f.translate.apply(this,r))}if(o.faRotate&&t.$eval(o.faRotate)){var r=t.$eval(o.faRotate).map(c);e.push(f.rotate.apply(this,r))}if(o.faRotateX&&t.$eval(o.faRotateX)&&e.push(f.rotateX(c(t.$eval(o.faRotateX)))),o.faRotateY&&t.$eval(o.faRotateY)&&e.push(f.rotateY(c(t.$eval(o.faRotateY)))),o.faRotateZ&&t.$eval(o.faRotateZ)&&e.push(f.rotateZ(c(t.$eval(o.faRotateZ)))),o.faScale&&t.$eval(o.faScale)){var r=t.$eval(o.faScale).map(c);e.push(f.scale.apply(this,r))}if(o.faSkew&&t.$eval(o.faSkew)){var r=t.$eval(o.faSkew).map(c);e.push(f.skew.apply(this,r))}return e.length?1===e.length?e[0]:f.multiply.apply(this,e):void 0},i.getOpacity=function(){return o.faOpacity&&t.$eval(o.faOpacity)?c(t.$eval(o.faOpacity)):1},i.modifier=new s({transform:i.getTransform,size:t.$eval(o.faSize),opacity:i.getOpacity,origin:t.$eval(o.faOrigin)}),i.renderNode=(new u).add(i.modifier),t.$on("$destroy",function(){i.modifier.setOpacity(0),t.$emit("unregisterChild",{id:t.$id})}),t.$on("registerChild",function(e,r){e.targetScope.$id!==e.currentScope.$id&&(i.renderNode.add(r.renderNode),e.stopPropagation())}),a(t,function(e){n.find("div").append(e)}),t.$emit("registerChild",i)}}}}}]),angular.module("famous.angular").directive("faPipeFrom",["$famous","$famousDecorator",function(e,r){return{restrict:"A",scope:!1,priority:16,compile:function(){var t=e["famous/core/Engine"];return{post:function(e,n,a){var o=r.ensureIsolate(e);e.$watch(function(){return e.$eval(a.faPipeFrom)},function(e,r){var n=o.renderNode||t;if(r instanceof Array)for(var a=0;a<r.length;a++)r[a].unpipe(n);else void 0!==r&&r.unpipe(n);if(e instanceof Array)for(var a=0;a<e.length;a++)e[a].pipe(n);else void 0!==e&&e.pipe(n)})}}}}}]),angular.module("famous.angular").directive("faPipeTo",["$famous","$famousDecorator",function(e,r){return{restrict:"A",scope:!1,priority:16,compile:function(){var t=e["famous/core/Engine"];return{post:function(e,n,a){var o=r.ensureIsolate(e);e.$watch(function(){return e.$eval(a.faPipeTo)},function(e,r){var n=o.renderNode||t;if(r instanceof Array)for(var a=0;a<r.length;a++)n.unpipe(r[a]);else void 0!==r&&n.unpipe(r);if(e instanceof Array)for(var a=0;a<e.length;a++)n.pipe(e[a]);else void 0!==e&&n.pipe(e)})}}}}}]),angular.module("famous.angular").directive("faRenderNode",["$famous","$famousDecorator",function(e,r){return{template:"<div></div>",transclude:!0,scope:!0,restrict:"EA",compile:function(t,n,a){return{pre:function(t,n,a){var o=r.ensureIsolate(t),i=e["famous/core/Engine"];o.children=[],a.$observe("faPipeTo",function(e){var r=t.$eval(e);r&&i.pipe(r)}),o.renderNode=t.$eval(a.faNode),t.$on("$destroy",function(){t.$emit("unregisterChild",{id:t.$id})}),t.$on("registerChild",function(e,r){e.targetScope.$id!=t.$id&&(o.renderNode.add(r.renderNode),o.children.push(r),e.stopPropagation())})},post:function(e,t){var n=r.ensureIsolate(e);a(e,function(e){t.find("div").append(e)}),e.$emit("registerChild",n)}}}}}]),angular.module("famous.angular").directive("faScrollView",["$famous","$famousDecorator","$timeout",function(e,r,t){return{template:"<div></div>",restrict:"E",transclude:!0,scope:!0,compile:function(n,a,o){return{pre:function(n,a,o){var i=r.ensureIsolate(n),u=e["famous/views/Scrollview"],s=e["famous/core/ViewSequence"],f=(e["famous/core/Surface"],[]),c=n.$eval(o.faOptions)||{};i.renderNode=new u(c);var l=function(e){t(function(){f.sort(function(e,r){return e.index-r.index});var r={array:_.map(f,function(e){return e.renderNode})};e&&(r.index=n.$eval(o.faStartIndex));var t=new s(r);i.renderNode.sequenceFrom(t)})};n.$on("registerChild",function(e,r){e.targetScope.$id!=n.$id&&(f.push(r),l(!0),e.stopPropagation())}),n.$on("unregisterChild",function(e,r){e.targetScope.$id!=n.$id&&(f=_.reject(f,function(e){return e.id===r.id}),l(),e.stopPropagation())})},post:function(e,t){var n=r.ensureIsolate(e);o(e,function(e){t.find("div").append(e)}),e.$emit("registerChild",n)}}}}}]),angular.module("famous.angular").directive("faSurface",["$famous","$famousDecorator","$interpolate","$controller","$compile",function(e,r){return{scope:!0,transclude:!0,template:'<div class="fa-surface"></div>',restrict:"EA",compile:function(t,n,a){return{pre:function(t,n,a){{var o=r.ensureIsolate(t),i=e["famous/core/Surface"];e["famous/core/Transform"],e["famous/core/EventHandler"]}t.$watch(function(){return o.getProperties()},function(){o.renderNode&&o.renderNode.setProperties(o.getProperties())},!0),o.getProperties=function(){return{backgroundColor:t.$eval(a.faBackgroundColor),color:t.$eval(a.faColor)}};var u={origin:t.$eval(a.faOrigin),translate:t.$eval(a.faTranslate),rotateZ:t.$eval(a.faRotateZ),skew:t.$eval(a.faSkew)};o.renderNode=new i({size:t.$eval(a.faSize),"class":t.$eval(a.class),properties:o.getProperties()}),a.class&&o.renderNode.setClasses(a["class"].split(" ")),o.modifier=function(){return u}},post:function(e,t){var n=r.ensureIsolate(e),o=function(){n.renderNode.setContent(t[0].querySelector("div.fa-surface"))};o(),a(e,function(e){angular.element(t[0].querySelectorAll("div.fa-surface")).append(e)}),e.$emit("registerChild",n)}}}}}]),angular.module("famous.angular").directive("faTap",["$parse","$famousDecorator",function(e,r){return{restrict:"A",compile:function(){return{post:function(t,n,a){var o=r.ensureIsolate(t);if(a.faTap){var i=o.renderNode._eventInput||o.renderNode,u=!1;i.on("touchmove",function(e){return u=!0,e}),i.on("touchend",function(r){if(!u){var n=e(a.faTap);n(t,{$event:r}),t.$$phase||t.$apply()}u=!1})}}}}}}]),angular.module("famous.angular").directive("faTouchend",["$parse","$famousDecorator",function(e,r){return{restrict:"A",scope:!1,compile:function(){return{post:function(t,n,a){var o=r.ensureIsolate(t);if(a.faTouchEnd){var i=o.renderNode._eventInput||o.renderNode;i.on("touchend",function(r){var n=e(a.faTouchMove);n(t,{$event:r}),t.$$phase||t.$apply()})}}}}}}]),angular.module("famous.angular").directive("faTouchmove",["$parse","$famousDecorator",function(e,r){return{restrict:"A",scope:!1,compile:function(){return{post:function(t,n,a){var o=r.ensureIsolate(t);if(a.faTouchMove){var i=o.renderNode._eventInput||o.renderNode;i.on("touchmove",function(r){var n=e(a.faTouchMove);n(t,{$event:r}),t.$$phase||t.$apply()})}}}}}}]),angular.module("famous.angular").directive("faTouchstart",["$parse","$famousDecorator",function(e,r){return{restrict:"A",scope:!1,compile:function(){return{post:function(t,n,a){var o=r.ensureIsolate(t);if(a.faTouchStart){var i=o.renderNode._eventInput||o.renderNode;i.on("touchstart",function(r){var n=e(a.faTouchStart);n(t,{$event:r}),t.$$phase||t.$apply()})}}}}}}]),angular.module("famous.angular").directive("faView",["$famous","$famousDecorator",function(e,r){return{template:"<div></div>",transclude:!0,scope:!0,restrict:"EA",compile:function(t,n,a){var o=e["famous/core/View"];return{pre:function(e,t,n){var a=r.ensureIsolate(e);a.children=[];a.renderNode=new o({size:e.$eval(n.faSize)||[void 0,void 0]}),e.$on("$destroy",function(){e.$emit("unregisterChild",{id:e.$id})}),e.$on("registerChild",function(r,t){r.targetScope.$id!=e.$id&&(a.renderNode.add(t.renderNode),a.children.push(t),r.stopPropagation())})},post:function(e,t){var n=r.ensureIsolate(e);a(e,function(e){t.find("div").append(e)}),e.$emit("registerChild",n)}}}}}]);