/**
 * famous-angular - Bring structure to your Famo.us apps with the power of AngularJS. Famo.us/Angular integrates seamlessly with existing Angular and Famo.us apps.
<<<<<<< HEAD
 * @version v0.0.16
 * @link https://github.com/Famous/famous-angular
 * @license MPL v2.0
 */
"use strict";window.name="NG_DEFER_BOOTSTRAP!"+window.name;var requirements=["famous/core/Engine","famous/core/EventEmitter","famous/core/EventHandler","famous/core/Modifier","famous/core/RenderNode","famous/core/Surface","famous/core/Transform","famous/core/View","famous/core/ViewSequence","famous/events/EventArbiter","famous/events/EventFilter","famous/events/EventMapper","famous/inputs/FastClick","famous/inputs/GenericSync","famous/inputs/MouseSync","famous/inputs/PinchSync","famous/inputs/RotateSync","famous/inputs/TouchSync","famous/surfaces/ContainerSurface","famous/surfaces/ImageSurface","famous/surfaces/InputSurface","famous/transitions/Easing","famous/transitions/SpringTransition","famous/transitions/Transitionable","famous/transitions/TransitionableTransform","famous/utilities/KeyCodes","famous/utilities/Timer","famous/views/Flipper","famous/views/GridLayout","famous/views/HeaderFooterLayout","famous/views/RenderController","famous/views/Scroller","famous/views/Scrollview","famous/views/SequentialLayout"],ngFameApp=angular.module("famous.angular",[]);require(requirements,function(){var e=arguments;ngFameApp.provider("$famous",function(){var e={};this.registerModule=function(r,n){e[r]=n},e.getIsolate=function(e){return"isolate"in e?e.isolate[e.$id]:{}},e.find=function(r){var n=angular.element(window.document.querySelectorAll(r)),t=function(e){var r=[];return angular.forEach(e,function(e,n){r[n]=angular.element(e).scope()}),r}(n),o=function(r){var n=[];return angular.forEach(r,function(r,t){n[t]=e.getIsolate(r)}),n}(t);return o},this.$get=function(){return e}}),ngFameApp.config(["$famousProvider",function(r){for(var n=0;n<requirements.length;n++)r.registerModule(requirements[n],e[n])}]),angular.element(document).ready(function(){angular.resumeBootstrap&&angular.resumeBootstrap()}),window.dispatchEvent(new Event("$famousModulesLoaded"))}),angular.module("famous.angular").factory("$famousDecorator",function(){return{addRole:function(){},ensureIsolate:function(e){e.isolate=e.isolate||{},e.isolate[e.$id]=e.isolate[e.$id]||{};var r=e.isolate[e.$id];r.id=e.$id;var n=e.$eval("$index");return n&&"$index"!==n&&!r.index&&(r.index=n),r}}}),angular.module("famous.angular").service("$famousPipe",function(){function e(e,r,n){e instanceof Array||(e=[e]),r instanceof Array||(r=[r]);for(var t=0;t<e.length;t++)for(var o=0;o<r.length;o++)void 0!==r[o]&&void 0!==e[t]&&r[o][n](e[t])}this.unpipesFromTargets=function(r,n){e(r,n,"unpipe")},this.pipesToTargets=function(r,n){e(r,n,"pipe")}}),angular.module("famous.angular").provider("$famousState",function(){function e(e,n){return angular.isObject(e)?n=e:n.name=e,r(n),this}function r(e){var r=e.name;if(!angular.isString(r)||r.indexOf("@")>=0)throw new Error("State must have a valid name");if(f.hasOwnProperty(r))throw new Error("State "+r+" is already defined");var t=-1!==r.indexOf(".")?r.substring(0,r.lastIndexOf(".")):angular.isString(e.parent)?e.parent:"";return t&&!f[t]?a(e):void n(e)}function n(e){angular.forEach(d,function(r){r(e)}),o(e),i(e)}function t(e){d.template(e),d.controller(e),d.transitions(e)}function o(e){var r=e.name;f[r]=e}function a(e){l[e.name]||(l[e.name]=e)}function i(e){l[e.name]&&delete l[e.name];for(var n in l)r(l[n])}function u(e,r,n,t){function o(r){return a?(s.$prior=s.$current,s.current=r,s.$current=f[r],s.parent=s.$current.parent,s.$current.locals=l(),void u(s.$current.locals).then(function(e){return angular.forEach(e,function(e){s.$current.locals[e.name].$template=e.data}),p(s.$current)}).then(function(r){s.$template=r.data,e.$broadcast("$stateChangeSuccess")})):e.$broadcast("$stateNotFound")}function a(e){return"^"===e?s.$parent!==c?i(s.parent):!1:0===e.indexOf("^")&&e.length>1?(e=s.parent+e,i(e)):0===e.indexOf(".")?(e=s.current+e,i(e)):i(e)}function i(e){return f[e]?!0:!1}function u(e){var r=[];return angular.forEach(e,function(e,n){r.push(d(e,n))}),n.all(r)}function l(){var e={};return angular.forEach(s.$current.views,function(r,n){"@"!==n&&(e[n]=r)}),e}function d(e,o){var a=n.defer(),i={};return r.get(e.template.link,{cache:t}).success(function(e){i.name=o,i.data=e,a.resolve(i)}).error(function(e){i.name=o,i.data=e,a.reject(i)}),a.promise}function p(e){return e.template.html?e.template.html:r.get(e.template.link,{cache:t})}return s={current:c.name,$current:c,locals:{},parent:"",$prior:{},$template:"",inTransitionTo:"",outTransitionFrom:""},s.includes=function(e){return i(e)},s.go=function(e,r){(e!==s.current||r)&&o(e)},s.getStates=function(){return f},s}var s,c,f={},l={};this.state=e;var d={parent:function(e){if(!angular.isDefined(e.parent)||!e.parent){var r=/^(.+)\.[^.]+$/.exec(e.name);e.parent=r?r[1]:c}},url:function(e){var r=e.url;if(angular.isDefined(r)&&!angular.isString(r))throw new Error("url for state "+e.name+" must be a string")},template:function(e){var r;if(e.templateUrl){if(r=e.templateUrl,!angular.isString(r)||".html"!==r.substr(-5))throw new Error("templateUrl must be a string pointing to an HTML document (e.g. templates/myTemp.html)");e.template={link:r}}else if(e.template){if(r=e.template,"string"!=typeof r)throw new Error("template must be a string containing valid HTML");e.template={html:r}}},controller:function(e){var r=e.controller;if(!e.template&&r)throw new Error("A template must defined in order to create a controller");if(r&&!angular.isString(r)&&!angular.isFunction(r))throw new Error("Controller must be a function or reference an existing controller")},transitions:function(e){var r=e.inTransitionFrom,n=e.outTransitionTo;(angular.isDefined(r)||angular.isDefined(n))&&(r&&(angular.isString(r)?e.inTransitionFrom=r:angular.isObject(r)&&angular.forEach(r,function(r,n){if(!angular.isString(r))throw new Error("inTransitionFrom property "+e+" must be a string");e.inTransitionFrom[n]=r||null})),n&&(angular.isString(n)?e.outTransitionFrom=n:angular.forEach(n,function(r,n){if(!angular.isString(r))throw new Error("outTransitionTo property "+e+" must be a string");e.outTransitionTo[n]=r||null})))},views:function(e){var r={};angular.forEach(angular.isDefined(e.views)?e.views:{"":e},function(n,o){o||(o="@"),-1===o.indexOf("@")&&(o+="@"+e.parent.name),t(n,o),r[o]=n}),e.views=r}};c={name:"",parent:null,navigable:!1,views:null,template:null,contoller:null},this.$get=u,u.$inject=["$rootScope","$http","$q","$templateCache"]}),angular.module("famous.angular").provider("$famousUrlRouter",function(){function e(e,r){if(!angular.isDefined(e)||!angular.isDefined(r))throw new Error("URL and state name required to define URL route");if(!n(e))throw new Error("When defining routes, must specify a valid url");u[e]=r}function r(e){if(!angular.isString(e)||e.indexOf("@")>=0)throw new Error("Default state must have a valid name");o=e}function n(e){var r=/^\/(?!\/)[a-zA-Z\d_\-\/(?!\/)]*$/;return angular.isString(e)&&!!r.exec(e)}function t(r,n,t){function s(){var r=t.getStates();angular.forEach(r,function(r,n){r.url&&e(r.url,n)})}function c(){f=n.path()}var f="";return a.location=function(){return console.log("location state"),n.path()},a.registered=function(){return console.log("registered urls"),i},a.listen=function(){console.log("listening");var e=r.$on("$locationChangeSuccess",a.update);return e},a.getDefaultState=function(){return o},a.update=function(){console.log("update triggered");var e=n.path();u[e]?(t.go(u[e]),f=e):(n.path(o),t.go(o),f=n.path())},s(),c(),a.listen(),a.update(),a}var o,a={},i={},u={};this.when=e,this.otherwise=r,this.$get=t,t.$inject=["$rootScope","$location","$famousState"]}),angular.module("famous.angular").directive("faAnimation",["$famous","$famousDecorator",function(e,r){return{restrict:"EA",scope:!0,compile:function(){var n=e["famous/core/Transform"],t=e["famous/transitions/Transitionable"],o=e["famous/transitions/Easing"];return{pre:function(e){r.ensureIsolate(e)},post:function(e,a,i){var u=r.ensureIsolate(e);setTimeout(function(){u.timeline=e.$eval(i.timeline),u._trans=new t(0),u.play=function(r){var n={duration:e.$eval(i.duration),curve:e.$eval(i.curve)||"linear"};u._trans.set(1,n,function(){r&&r(),i.loop&&setTimeout(function(){u.replay(r)},0)})},u.reset=function(){u._trans.set(0)},u.replay=function(e){u.reset(),u.play(e)};var r=void 0;i.event&&(r&&r(),r=e.$on(i.event,function(e,r){var n=r&&r.callback?r.callback:void 0;u.replay(n)}));i.id;if(void 0===u.timeline&&(u.timeline=u._trans.get.bind(u._trans),i.autoplay&&u.play()),!u.timeline instanceof Function)throw"timeline must be a reference to a function or duration must be provided";for(var s=a[0].querySelectorAll("animate"),c={},f=0;f<s.length;f++)!function(){var r=s[f];if(r.attributes.targetmodselector){var t=angular.element(a[0].parentNode)[0].querySelectorAll(r.attributes.targetmodselector.value);angular.forEach(t,function(t){var a=angular.element(t).scope(),i=a.isolate[a.$id].modifier,s=a.isolate[a.$id].getTransform,f=r.attributes.curve&&"linear"!==r.attributes.curve.value?o[r.attributes.curve.value]:function(e){return e};if(r.attributes.field){var l=r.attributes.field.value,d=r.attributes.timelinelowerbound?parseFloat(r.attributes.timelinelowerbound.value):0,p=r.attributes.timelineupperbound?parseFloat(r.attributes.timelineupperbound.value):1;if(!r.attributes.startvalue)throw"you must provide a start value for the animation";var m=e.$eval(r.attributes.startvalue.value);if(!r.attributes.endvalue)throw"you must provide an end value for the animation";var v=e.$eval(r.attributes.endValue.value),g=c[a.$id]=c[a.$id]||{},$=g[l]=g[l]||[];$.push({field:l,lowerBound:d,upperBound:p,startValue:m,endValue:v,curve:f}),$.sort(function(e,r){return e.lowerBound-r.lowerBound});for(var h=1;h<$.length;h++)for(var w=$[h].lowerBound,y=0;h>y;y++)if(w<$[y].upperBound)throw"Animate segments have overlapping                                 domains for the same field ("+l+").                                 At any point in the timeline, only one <animate>                                 can affect a given field on the same modifier.";var S=function(){for(var e=u.timeline()||0,r=0,n=$[r],t=0;t<$.length;t++){if(e>=$[t].lowerBound&&e<=$[t].upperBound){n=$[t];break}if(t===$.length-1){n=$[t];break}if(e>=$[t].upperBound&&e<$[t+1].lowerBound){n=$[t];break}}if(e<=n.lowerBound)return n.startValue;if(e>=n.upperBound)return n.endValue;var o=n.upperBound-n.lowerBound,a=(e-n.lowerBound)/o;if(Array.isArray(n.startValue)){for(var i=[],t=0;t<n.startValue.length;t++)i.push(n.startValue[t]+n.curve(a)*(n.endValue[t]-n.startValue[t]));return i}return n.startValue+n.curve(a)*(n.endValue-n.startValue)},N=g.transformComponents=g.transformComponents||[];"opacity"===l?i.opacityFrom(function(){return S()}):"origin"===l?i.originFrom(function(){return S()}):"size"===l?i.sizeFrom(function(){return S()}):(N.push({field:l,fn:S}),i.transformFrom(function(){for(var e={},r=s&&s()?[s()]:[],t=0;t<N.length;t++)!function(){var o=N[t].field;if(!e[o]){var a=N[t].fn();r.push(Array.isArray(a)?n[o].apply(this,a):n[o](a)),e[o]=!0}}();return 1===r.length?r[0]:n.multiply.apply(this,r)}))}})}}()},1)}}}}}]),angular.module("famous.angular").directive("faApp",["$famous","$famousDecorator",function(e,r){return{template:'<div style="display: none;"><div></div></div>',transclude:!0,scope:!0,restrict:"EA",compile:function(n,t,o){return{pre:function(n,t){function o(){i.apply(this,arguments)}{var a=r.ensureIsolate(n),i=e["famous/core/View"],u=e["famous/core/Engine"];e["famous/core/Transform"]}t.append('<div class="famous-angular-container"></div>'),a.context=u.createContext(t[0].querySelector(".famous-angular-container")),o.prototype=Object.create(i.prototype),o.prototype.constructor=o;a.view=new o,a.context.add(a.view),n.$on("$destroy",function(){a.context.update=angular.noop}),n.$on("registerChild",function(e,r){a.view.add(r.renderNode),e.stopPropagation()})},post:function(e,n){var t=r.ensureIsolate(e);o(e,function(e){angular.element(n[0].querySelectorAll("div div")[0]).append(e)}),t.readyToRender=!0}}}}}]),angular.module("famous.angular").directive("faClick",["$parse","$famousDecorator",function(e,r){return{restrict:"A",compile:function(){return{post:function(n,t,o){var a=r.ensureIsolate(n);if(o.faClick){var i=a.renderNode._eventInput||a.renderNode;i.on("click",function(r){var t=e(o.faClick);t(n,{$event:r}),n.$$phase||n.$apply()})}}}}}}]),angular.module("famous.angular").directive("faContainerSurface",["$famous","$famousDecorator",function(e,r){return{template:"<div></div>",restrict:"E",transclude:!0,scope:!0,compile:function(n,t,o){return{pre:function(n,t,o){var a=r.ensureIsolate(n),i=e["famous/surfaces/ContainerSurface"],u=n.$eval(o.faOptions)||{};a.renderNode=new i(u),n.$on("registerChild",function(e,r){e.targetScope.$id!=n.$id&&(a.renderNode.add(r.renderNode),e.stopPropagation())}),n.$on("unregisterChild",function(){throw"unimplemented: fa-container-surface does not support removing children"})},post:function(e,n){var t=r.ensureIsolate(e);o(e,function(e){n.find("div").append(e)}),e.$emit("registerChild",t)}}}}}]),angular.module("famous.angular").directive("faFlipper",["$famous","$famousDecorator",function(e,r){return{template:"<div></div>",restrict:"E",transclude:!0,scope:!0,compile:function(n,t,o){return{pre:function(n,t,o){var a=r.ensureIsolate(n),i=e["famous/views/Flipper"],u=n.$eval(o.faOptions)||{};a.renderNode=new i(u),a.children=[],a.flip=function(e){a.renderNode.flip(e||n.$eval(o.faOptions))},n.$on("$destroy",function(){n.$emit("unregisterChild",{id:n.$id})}),n.$on("registerChild",function(e,r){if(e.targetScope.$id!=n.$id){var t=a.children.length;if(0==t)a.renderNode.setFront(r.renderNode);else{if(1!=t)throw"fa-flipper accepts only two child elements; more than two have been provided";a.renderNode.setBack(r.renderNode)}a.children.push(r.renderNode),e.stopPropagation()}}),n.$on("unregisterChild",function(e){e.targetScope.$id!=n.$id})},post:function(e,n){var t=r.ensureIsolate(e);o(e,function(e){n.find("div").append(e)}),e.$emit("registerChild",t)}}}}}]),angular.module("famous.angular").directive("faGridLayout",["$famous","$famousDecorator",function(e,r){return{template:"<div></div>",restrict:"E",transclude:!0,scope:!0,compile:function(n,t,o){return{pre:function(n,t,o){var a=r.ensureIsolate(n),i=e["famous/views/GridLayout"],u=(e["famous/core/ViewSequence"],[]),s=n.$eval(o.faOptions)||{};a.renderNode=new i(s);var c=function(){u.sort(function(e,r){return e.index-r.index}),a.renderNode.sequenceFrom(function(e){var r=[];return angular.forEach(e,function(e,n){r[n]=e.renderNode}),r}(u))};n.$on("registerChild",function(e,r){e.targetScope.$id!=n.$id&&(u.push(r),c(),e.stopPropagation())}),n.$on("unregisterChild",function(e,r){e.targetScope.$id!=n.$id&&(u=function(e){var n=[];return angular.forEach(e,function(e){e.id!==r.id&&n.push(e)}),n}(u),c(),e.stopPropagation())})},post:function(e,n){var t=r.ensureIsolate(e);o(e,function(e){n.find("div").append(e)}),e.$emit("registerChild",t)}}}}}]),angular.module("famous.angular").directive("faHeaderFooterLayout",["$famous","$famousDecorator",function(e,r){return{template:"<div></div>",restrict:"E",transclude:!0,scope:!0,compile:function(n,t,o){var a=e["famous/views/HeaderFooterLayout"],i=e["famous/core/RenderNode"];return{pre:function(e,n,t){var o=r.ensureIsolate(e),u=(new i,new i,new i,e.$eval(t.faOptions)||{});o.renderNode=new a(u);var s=0;e.$on("registerChild",function(r,n){if(r.targetScope.$id!=e.$id){if(s++,1===s)o.renderNode.header.add(n.renderNode);else if(2===s)o.renderNode.content.add(n.renderNode);else{if(3!==s)throw"fa-header-footer-layout can accept no more than 3 children";o.renderNode.footer.add(n.renderNode)}r.stopPropagation()}}),e.$on("unregisterChild",function(){throw"unimplemented: fa-header-footer-layout does not support removing children"})},post:function(e,n){var t=r.ensureIsolate(e);o(e,function(e){n.find("div").append(e)}),e.$emit("registerChild",t)}}}}}]),angular.module("famous.angular").directive("faImageSurface",["$famous","$famousDecorator",function(e,r){return{scope:!0,template:'<div class="fa-image-surface"></div>',restrict:"EA",compile:function(){return{pre:function(n,t,o){{var a=r.ensureIsolate(n),i=e["famous/surfaces/ImageSurface"];e["famous/core/Transform"],e["famous/core/EventHandler"]}n.$watch(function(){return a.getProperties()},function(){a.renderNode&&a.renderNode.setProperties(a.getProperties())},!0),a.getProperties=function(){return{backgroundColor:n.$eval(o.faBackgroundColor),color:n.$eval(o.faColor)}};a.renderNode=new i({size:n.$eval(o.faSize),"class":n.$eval(o.class),properties:a.getProperties()}),o.class&&a.renderNode.setClasses(o["class"].split(" "))},post:function(e,n,t){var o=r.ensureIsolate(e),a=function(){o.renderNode.setContent(t.faImageUrl)};a(),t.$observe("faImageUrl",a),e.$emit("registerChild",o)}}}}}]),angular.module("famous.angular").directive("faIndex",["$parse","$famousDecorator",function(e,r){return{restrict:"A",scope:!1,priority:16,compile:function(){return{post:function(e,n,t){var o=r.ensureIsolate(e);o.index=e.$eval(t.faIndex),e.$watch(function(){return e.$eval(t.faIndex)},function(){o.index=e.$eval(t.faIndex)})}}}}}]),angular.module("famous.angular").directive("faModifier",["$famous","$famousDecorator","$parse",function(e,r,n){return{template:"<div></div>",transclude:!0,restrict:"EA",priority:2,scope:!0,compile:function(t,o,a){return{post:function(t,o,i){function u(e){return e.replace(p,function(e,r,n,t){return t?n.toUpperCase():n}).replace(m,"Moz$1")}function s(e){return u(e.replace(v,""))}var c=r.ensureIsolate(t),f=e["famous/core/RenderNode"],l=e["famous/core/Modifier"],d=e["famous/core/Transform"],p=/([\:\-\_]+(.))/g,m=/^moz([A-Z])/,v=/^(x[\:\-_]|data[\:\-_])/i,g=["aboutOrigin","perspective","rotate","rotateAxis","rotateX","rotateY","rotateZ","scale","skew","translate"];i.$observe("faTransformOrder",function(){var e=t.$eval(i.faTransformOrder);void 0!==e&&(g=e)});var $={};angular.forEach(g,function(e){var r=s("fa-"+e);i.$observe(r,function(){$[e]=n(i[r])})});var h=angular.noop;i.$observe("faTransform",function(){h=n(i.faTransform)}),c.getTransform=function(){var e=h(t);if(void 0!==e)return e instanceof Function?e():e instanceof Object&&void 0!==e.get?e.get():e;var r=[];return angular.forEach(g,function(e){var n=$[e]?$[e](t):void 0;void 0!==n&&(n instanceof Function&&(n=n()),r.push(n instanceof Array?d[e].apply(this,n):d[e].call(this,n)))}),r.length?1===r.length?r[0]:d.multiply.apply(this,r):void 0};var w=angular.noop;i.$observe("faAlign",function(){w=n(i.faAlign)}),c.getAlign=function(){var e=w(t);return e instanceof Function?e():e instanceof Object&&void 0!==e.get?e.get():e};var y=angular.noop;i.$observe("faOpacity",function(){y=n(i.faOpacity)}),c.getOpacity=function(){var e=y(t);return void 0===e?1:e instanceof Function?e():e instanceof Object&&void 0!==e.get?e.get():e};var S=angular.noop;i.$observe("faSize",function(){S=n(i.faSize)}),c.getSize=function(){var e=S(t);return e instanceof Function?e():e instanceof Object&&void 0!==e.get?e.get():e};var N=angular.noop;i.$observe("faOrigin",function(){N=n(i.faOrigin)}),c.getOrigin=function(){var e=N(t);return e instanceof Function?e():e instanceof Object&&void 0!==e.get?e.get():e},c.modifier=new l({transform:c.getTransform,size:c.getSize,opacity:c.getOpacity,origin:c.getOrigin,align:c.getAlign}),c.renderNode=(new f).add(c.modifier),t.$on("$destroy",function(){c.modifier.setOpacity(0),t.$emit("unregisterChild",{id:t.$id})}),t.$on("registerChild",function(e,r){e.targetScope.$id!==e.currentScope.$id&&(c.renderNode.add(r.renderNode),e.stopPropagation())}),a(t,function(e){o.find("div").append(e)}),t.$emit("registerChild",c),t.$$phase||t.$apply()}}}}}]),angular.module("famous.angular").directive("faPipeFrom",["$famous","$famousDecorator","$famousPipe",function(e,r,n){return{restrict:"A",scope:!1,priority:16,compile:function(){var t=e["famous/core/Engine"];return{post:function(e,o,a){var i=r.ensureIsolate(e);e.$watch(function(){return e.$eval(a.faPipeFrom)},function(e,r){var o=i.renderNode||t;n.unpipesFromTargets(o,r),n.pipesToTargets(o,e)}),e.$on("$destroy",function(){n.unpipesFromTargets(i.renderNode||t,e.$eval(a.faPipeFrom))})}}}}}]),angular.module("famous.angular").directive("faPipeTo",["$famous","$famousDecorator","$famousPipe",function(e,r,n){return{restrict:"A",scope:!1,priority:16,compile:function(){var t=e["famous/core/Engine"];return{post:function(e,o,a){var i=r.ensureIsolate(e);e.$watch(function(){return e.$eval(a.faPipeTo)},function(e,r){var o=i.renderNode||t;n.unpipesFromTargets(r,o),n.pipesToTargets(e,o)}),e.$on("$destroy",function(){n.unpipesFromTargets(e.$eval(a.faPipeTo),i.renderNode||t)})}}}}}]),angular.module("famous.angular").directive("faRenderNode",["$famous","$famousDecorator",function(e,r){return{template:"<div></div>",transclude:!0,scope:!0,restrict:"EA",compile:function(n,t,o){return{pre:function(n,t,o){var a=r.ensureIsolate(n),i=e["famous/core/Engine"];a.children=[],o.$observe("faPipeTo",function(e){var r=n.$eval(e);r&&i.pipe(r)}),a.renderNode=n.$eval(o.faNode),n.$on("$destroy",function(){n.$emit("unregisterChild",{id:n.$id})}),n.$on("registerChild",function(e,r){e.targetScope.$id!=n.$id&&(a.renderNode.add(r.renderNode),a.children.push(r),e.stopPropagation())})},post:function(e,n){var t=r.ensureIsolate(e);o(e,function(e){n.find("div").append(e)}),e.$emit("registerChild",t)}}}}}]),angular.module("famous.angular").directive("faScrollView",["$famous","$famousDecorator","$timeout",function(e,r,n){return{template:"<div></div>",restrict:"E",transclude:!0,scope:!0,compile:function(t,o,a){return{pre:function(t,o,a){var i=r.ensureIsolate(t),u=e["famous/views/Scrollview"],s=e["famous/core/ViewSequence"],c=(e["famous/core/Surface"],[]),f=t.$eval(a.faOptions)||{};i.renderNode=new u(f);var l=function(e){n(function(){c.sort(function(e,r){return e.index-r.index});var r={array:function(e){var r=[];return angular.forEach(e,function(e,n){r[n]=e.renderNode}),r}(c)};e&&(r.index=t.$eval(a.faStartIndex));var n=new s(r);i.renderNode.sequenceFrom(n)})};t.$on("registerChild",function(e,r){e.targetScope.$id!=t.$id&&(c.push(r),l(!0),e.stopPropagation())}),t.$on("unregisterChild",function(e,r){e.targetScope.$id!=t.$id&&(c=function(e){var n=[];return angular.forEach(e,function(e){e.id!==r.id&&n.push(e)}),n}(c),l(),e.stopPropagation())})},post:function(e,n){var t=r.ensureIsolate(e);a(e,function(e){n.find("div").append(e)}),e.$emit("registerChild",t)}}}}}]),angular.module("famous.angular").directive("faSequentialLayout",["$famous","$famousDecorator",function(e,r){return{template:"<div></div>",restrict:"E",transclude:!0,scope:!0,compile:function(n,t,o){return window.$f=e,{pre:function(n,t,o){var a=r.ensureIsolate(n),i=e["famous/views/SequentialLayout"],u=[],s=n.$eval(o.faOptions)||{};a.renderNode=new i(s);var c=function(){u.sort(function(e,r){return e.index-r.index}),a.renderNode.sequenceFrom(function(e){var r=[];return angular.forEach(e,function(e,n){r[n]=e.renderNode}),r}(u))};n.$on("registerChild",function(e,r){e.targetScope.$id!=n.$id&&(u.push(r),c(),e.stopPropagation())}),n.$on("unregisterChild",function(e,r){e.targetScope.$id!=n.$id&&(u=function(e){var n=[];return angular.forEach(e,function(e){e.id!==r.id&&n.push(e)}),n}(u),c(),e.stopPropagation())})},post:function(e,n){var t=r.ensureIsolate(e);o(e,function(e){n.find("div").append(e)}),e.$emit("registerChild",t)}}}}}]),angular.module("famous.angular").config(["$provide","$animateProvider",function(e){e.decorator("$animate",["$delegate","$$asyncCallback","$famous",function(e,r,n){function t(e){return n.getIsolate(e.scope()).renderNode instanceof o}var o=n["famous/core/Surface"];return{enabled:e.enabled,enter:e.enter,leave:e.leave,move:e.move,addClass:function(r,o,a){e.addClass(r,o,a),t(r)&&angular.forEach(o.split(" "),function(e){n.getIsolate(r.scope()).renderNode.addClass(e)})},removeClass:function(r,o,a){e.removeClass(r,o,a),t(r)&&angular.forEach(o.split(" "),function(e){n.getIsolate(r.scope()).renderNode.removeClass(e)})},setClass:function(r,o,a,i){if(e.setClass(r,o,a,i),t(r)){var u=n.getIsolate(r.scope()).renderNode;angular.forEach(o.split(" "),function(e){u.addClass(e)}),angular.forEach(a.split(" "),function(e){u.removeClass(e)})}}}}])}]).directive("faSurface",["$famous","$famousDecorator","$interpolate","$controller","$compile",function(e,r){return{scope:!0,transclude:!0,template:'<div class="fa-surface"></div>',restrict:"EA",compile:function(n,t,o){return{pre:function(n,t,o){{var a=r.ensureIsolate(n),i=e["famous/core/Surface"];e["famous/core/Transform"],e["famous/core/EventHandler"]}n.$watch(function(){return a.getProperties()},function(){a.renderNode&&a.renderNode.setProperties(a.getProperties())},!0);var u=function(e){return"fa"+e.charAt(0).toUpperCase()+e.slice(1)};a.getProperties=function(){for(var e=n.$eval(o.faProperties)||{},r=["backgroundColor","margin","padding","color"],t=0;t<r.length;t++){var a=r[t],i=u(a);o[i]&&(e[a]=n.$eval(o[i]))}return e},a.renderNode=new i({size:n.$eval(o.faSize),properties:a.getProperties()}),o.class&&a.renderNode.setClasses(o["class"].split(" "))},post:function(e,n){var t=r.ensureIsolate(e),a=function(){t.renderNode.setContent(n[0].querySelector("div.fa-surface"))};a(),o(e,function(e){angular.element(n[0].querySelectorAll("div.fa-surface")).append(e)}),e.$emit("registerChild",t)}}}}}]),angular.module("famous.angular").directive("faTap",["$parse","$famousDecorator",function(e,r){return{restrict:"A",compile:function(){return{post:function(n,t,o){var a=r.ensureIsolate(n);if(o.faTap){var i=a.renderNode._eventInput||a.renderNode,u=!1;i.on("touchmove",function(e){return u=!0,e}),i.on("touchend",function(r){if(!u){var t=e(o.faTap);t(n,{$event:r}),n.$$phase||n.$apply()}u=!1})}}}}}}]),angular.module("famous.angular").directive("faTouchend",["$parse","$famousDecorator",function(e,r){return{restrict:"A",scope:!1,compile:function(){return{post:function(n,t,o){var a=r.ensureIsolate(n);if(o.faTouchend){var i=a.renderNode._eventInput||a.renderNode;i.on("touchend",function(r){var t=e(o.faTouchend);t(n,{$event:r}),n.$$phase||n.$apply()})}}}}}}]),angular.module("famous.angular").directive("faTouchmove",["$parse","$famousDecorator",function(e,r){return{restrict:"A",scope:!1,compile:function(){return{post:function(n,t,o){var a=r.ensureIsolate(n);if(o.faTouchmove){var i=a.renderNode._eventInput||a.renderNode;i.on("touchmove",function(r){var t=e(o.faTouchmove);t(n,{$event:r}),n.$$phase||n.$apply()})}}}}}}]),angular.module("famous.angular").directive("faTouchstart",["$parse","$famousDecorator",function(e,r){return{restrict:"A",scope:!1,compile:function(){return{post:function(n,t,o){var a=r.ensureIsolate(n);if(o.faTouchstart){var i=a.renderNode._eventInput||a.renderNode;i.on("touchstart",function(r){var t=e(o.faTouchstart);t(n,{$event:r}),n.$$phase||n.$apply()})}}}}}}]),angular.module("famous.angular").directive("faView",["$famous","$famousDecorator",function(e,r){return{template:"<div></div>",transclude:!0,scope:!0,restrict:"EA",compile:function(n,t,o){var a=e["famous/core/View"];return{pre:function(e,n,t){var o=r.ensureIsolate(e);o.children=[];o.renderNode=new a({size:e.$eval(t.faSize)||[void 0,void 0]}),e.$on("$destroy",function(){e.$emit("unregisterChild",{id:e.$id})}),e.$on("registerChild",function(r,n){r.targetScope.$id!=e.$id&&(o.renderNode.add(n.renderNode),o.children.push(n),r.stopPropagation())})},post:function(e,n){var t=r.ensureIsolate(e);o(e,function(e){n.find("div").append(e)}),e.$emit("registerChild",t)}}}}}]);
=======
 * @version v0.0.17
 * @link https://github.com/Famous/famous-angular
 * @license MPL v2.0
 */
"use strict";window.name="NG_DEFER_BOOTSTRAP!"+window.name;var requirements=["famous/core/Context","famous/core/ElementAllocator","famous/core/Engine","famous/core/Entity","famous/core/EventEmitter","famous/core/EventHandler","famous/core/Group","famous/core/Modifier","famous/core/OptionsManager","famous/core/RenderNode","famous/core/Scene","famous/core/SpecParser","famous/core/Surface","famous/core/Transform","famous/core/View","famous/core/ViewSequence","famous/events/EventArbiter","famous/events/EventFilter","famous/events/EventMapper","famous/inputs/FastClick","famous/inputs/GenericSync","famous/inputs/MouseSync","famous/inputs/PinchSync","famous/inputs/RotateSync","famous/inputs/ScaleSync","famous/inputs/ScrollSync","famous/inputs/TouchSync","famous/inputs/TouchTracker","famous/inputs/TwoFingerSync","famous/math/Matrix","famous/math/Quaternion","famous/math/Random","famous/math/Utilities","famous/math/Vector","famous/modifiers/Draggable","famous/modifiers/Fader","famous/modifiers/ModifierChain","famous/modifiers/StateModifier","famous/physics/PhysicsEngine","famous/surfaces/CanvasSurface","famous/surfaces/ContainerSurface","famous/surfaces/FormContainerSurface","famous/surfaces/ImageSurface","famous/surfaces/InputSurface","famous/surfaces/SubmitInputSurface","famous/surfaces/TextareaSurface","famous/surfaces/VideoSurface","famous/transitions/CachedMap","famous/transitions/Easing","famous/transitions/MultipleTransition","famous/transitions/SnapTransition","famous/transitions/SpringTransition","famous/transitions/Transitionable","famous/transitions/TransitionableTransform","famous/transitions/TweenTransition","famous/transitions/WallTransition","famous/utilities/KeyCodes","famous/utilities/Timer","famous/utilities/Utility","famous/views/Deck","famous/views/EdgeSwapper","famous/views/FlexibleLayout","famous/views/Flipper","famous/views/GridLayout","famous/views/HeaderFooterLayout","famous/views/Lightbox","famous/views/RenderController","famous/views/ScrollContainer","famous/views/Scroller","famous/views/Scrollview","famous/views/SequentialLayout","famous/widgets/NavigationBar","famous/widgets/Slider","famous/widgets/TabBar","famous/widgets/ToggleButton","famous/physics/bodies/Body","famous/physics/bodies/Circle","famous/physics/bodies/Particle","famous/physics/bodies/Rectangle","famous/physics/constraints/Collision","famous/physics/constraints/Constraint","famous/physics/constraints/Curve","famous/physics/constraints/Distance","famous/physics/constraints/Snap","famous/physics/constraints/Surface","famous/physics/constraints/Wall","famous/physics/constraints/Walls","famous/physics/forces/Drag","famous/physics/forces/Force","famous/physics/forces/Repulsion","famous/physics/forces/RotationalDrag","famous/physics/forces/RotationalSpring","famous/physics/forces/Spring","famous/physics/forces/VectorField","famous/physics/integrators/SymplecticEuler"],ngFameApp=angular.module("famous.angular",[]);require(requirements,function(){var e=arguments;ngFameApp.provider("$famous",function(){var e={};this.registerModule=function(r,n){e[r]=n},e.getIsolate=function(e){return"isolate"in e?e.isolate[e.$id]:{}},e.find=function(r){var n=angular.element(window.document.querySelectorAll(r)),t=function(e){var r=[];return angular.forEach(e,function(e,n){r[n]=angular.element(e).scope()}),r}(n),o=function(r){var n=[];return angular.forEach(r,function(r,t){n[t]=e.getIsolate(r)}),n}(t);return o},this.$get=function(){return e}}),ngFameApp.config(["$famousProvider",function(r){for(var n=0;n<requirements.length;n++)r.registerModule(requirements[n],e[n])}]),angular.element(document).ready(function(){angular.resumeBootstrap&&angular.resumeBootstrap()}),window.dispatchEvent(new Event("$famousModulesLoaded"))}),angular.module("famous.angular").factory("$famousDecorator",function(){return{addRole:function(){},ensureIsolate:function(e){e.isolate=e.isolate||{},e.isolate[e.$id]=e.isolate[e.$id]||{};var r=e.isolate[e.$id];r.id=e.$id;var n=e.$eval("$index");return n&&"$index"!==n&&!r.index&&(r.index=n),r}}}),angular.module("famous.angular").service("$famousPipe",function(){function e(e,r,n){e instanceof Array||(e=[e]),r instanceof Array||(r=[r]);for(var t=0;t<e.length;t++)for(var o=0;o<r.length;o++)void 0!==r[o]&&void 0!==e[t]&&r[o][n](e[t])}this.unpipesFromTargets=function(r,n){e(r,n,"unpipe")},this.pipesToTargets=function(r,n){e(r,n,"pipe")}}),angular.module("famous.angular").provider("$famousState",function(){function e(e,n){return angular.isObject(e)?n=e:n.name=e,r(n),this}function r(e){var r=e.name;if(!angular.isString(r)||r.indexOf("@")>=0)throw new Error("State must have a valid name");if(f.hasOwnProperty(r))throw new Error("State "+r+" is already defined");var t=-1!==r.indexOf(".")?r.substring(0,r.lastIndexOf(".")):angular.isString(e.parent)?e.parent:"";return t&&!f[t]?a(e):void n(e)}function n(e){angular.forEach(d,function(r){r(e)}),o(e),i()}function t(e){d.template(e),d.controller(e),d.transitions(e)}function o(e){var r=e.name;delete e.name,f[r]=e}function a(e){l[e.name]||(l[e.name]=e)}function i(){for(var e in l)r(l[e])}function u(e,r,n,t){function o(r){return r!==s.current?"^"===r&&s.$parent!==c?(r=s.parent,a(r)):(e.$broadcast("$stateNotFound"),0===r.indexOf("^")&&r.length>1?(r=s.parent+r,a(r)):0===r.indexOf(".")?(r=s.current+r,a(r)):void a(r)):void 0}function a(r){s.includes(r)?i(r):e.$broadcast("$stateNotFound")}function i(r){s.$prior=s.$current,s.current=r,s.$current=f[r],s.parent=s.$current.parent,s.$current.locals=l(),u(s.$current.locals).then(function(e){return angular.forEach(e,function(e){s.$current.locals[e.name].$template=e.data}),p(s.$current)}).then(function(r){s.$template=r.data,e.$broadcast("$stateChangeSuccess")})}function u(e){var r=[];return angular.forEach(e,function(e,n){r.push(d(e,n))}),n.all(r)}function l(){var e={};return angular.forEach(s.$current.views,function(r,n){"@"!==n&&(e[n]=r)}),e}function d(e,o){var a=n.defer(),i={};return r.get(e.template.link,{cache:t}).success(function(e){i.name=o,i.data=e,a.resolve(i)}).error(function(e){i.name=o,i.data=e,a.reject(i)}),a.promise}function p(e){return e.template.html?e.template.html:r.get(e.template.link,{cache:t})}return s={current:c.name,$current:c,locals:{},parent:"",$prior:{},$template:"",inTransitionTo:"",outTransitionFrom:""},s.includes=function(e){return f[e]?!0:!1},s.go=function(e){o(e)},s}var s,c,f={},l={};this.state=e;var d={parent:function(e){if(!angular.isDefined(e.parent)||!e.parent){var r=/^(.+)\.[^.]+$/.exec(e.name);e.parent=r?r[1]:c}},url:function(e){var r=e.url;if(angular.isDefined(r)&&($famousUrlRouter.registerUrl(e,r),!angular.isString(r)))throw new Error("url for state "+e.name+" must be a string")},template:function(e){var r;if(e.templateUrl){if(r=e.templateUrl,!angular.isString(r)||".html"!==r.substr(-5))throw new Error("templateUrl must be a string pointing to an HTML document (e.g. templates/myTemp.html)");e.template={link:r}}else if(e.template){if(r=e.template,"string"!=typeof r)throw new Error("template must be a string containing valid HTML");e.template={html:r}}},controller:function(e){var r=e.controller;if(!e.template&&r)throw new Error("A template must defined in order to create a controller");if(r&&!angular.isString(r)&&!angular.isFunction(r))throw new Error("Controller must be a function or reference an existing controller")},transitions:function(e){var r=e.inTransitionFrom,n=e.outTransitionTo;(angular.isDefined(r)||angular.isDefined(n))&&(r&&angular.forEach(r,function(r,n){if(n&&!angular.isString(r))throw new Error("inTransitionFrom property "+n+" must be a string");e.inTransitionFrom[n]=r||null}),n&&angular.forEach(n,function(r,n){if(n&&!angular.isString(r))throw new Error("outTransitionTo property "+n+" must be a string");e.outTransitionTo[n]=r||null}))},views:function(e){var r={};angular.forEach(angular.isDefined(e.views)?e.views:{"":e},function(n,o){o||(o="@"),-1===o.indexOf("@")&&(o+="@"+e.parent.name),t(n,o),r[o]=n}),e.views=r}};c={name:"",parent:null,navigable:!1,views:null,template:null,contoller:null},this.$get=u,u.$inject=["$rootScope","$http","$q","$templateCache"]}),angular.module("famous.angular").provider("$famousUrlRouter",function(){function e(e){t=e}function r(e,r,o){return n.location=function(){o.info("Current location",r.path())},n.name=function(){o.info(t)},n.listen=function(){e.$on("$locationChangeSuccess",function(){o.info("Location changed to "+r.path())})},n}var n={},t="";this.test=e,this.$get=r,r.$inject=["$rootScope","$location","$log"]}),angular.module("famous.angular").directive("faAnimation",["$famous","$famousDecorator",function(e,r){return{restrict:"EA",scope:!0,compile:function(){var n=e["famous/core/Transform"],t=e["famous/transitions/Transitionable"],o=e["famous/transitions/Easing"];return{pre:function(e){r.ensureIsolate(e)},post:function(e,a,i){var u=r.ensureIsolate(e);setTimeout(function(){u.timeline=e.$eval(i.timeline),u._trans=new t(0),u.play=function(r){var n={duration:e.$eval(i.duration),curve:e.$eval(i.curve)||"linear"};u._trans.set(1,n,function(){r&&r(),i.loop&&setTimeout(function(){u.replay(r)},0)})},u.reset=function(){u._trans.set(0)},u.replay=function(e){u.reset(),u.play(e)};var r=void 0;i.event&&(r&&r(),r=e.$on(i.event,function(e,r){var n=r&&r.callback?r.callback:void 0;u.replay(n)}));i.id;if(void 0===u.timeline&&(u.timeline=u._trans.get.bind(u._trans),i.autoplay&&u.play()),!u.timeline instanceof Function)throw"timeline must be a reference to a function or duration must be provided";for(var s=a[0].querySelectorAll("animate"),c={},f=0;f<s.length;f++)!function(){var r=s[f];if(r.attributes.targetmodselector){var t=angular.element(a[0].parentNode)[0].querySelectorAll(r.attributes.targetmodselector.value);angular.forEach(t,function(t){var a=angular.element(t).scope(),i=a.isolate[a.$id].modifier,s=a.isolate[a.$id].getTransform,f=r.attributes.curve&&"linear"!==r.attributes.curve.value?o[r.attributes.curve.value]:function(e){return e};if(r.attributes.field){var l=r.attributes.field.value,d=r.attributes.timelinelowerbound?parseFloat(r.attributes.timelinelowerbound.value):0,p=r.attributes.timelineupperbound?parseFloat(r.attributes.timelineupperbound.value):1;if(!r.attributes.startvalue)throw"you must provide a start value for the animation";var m=e.$eval(r.attributes.startvalue.value);if(!r.attributes.endvalue)throw"you must provide an end value for the animation";var v=e.$eval(r.attributes.endValue.value),g=c[a.$id]=c[a.$id]||{},$=g[l]=g[l]||[];$.push({field:l,lowerBound:d,upperBound:p,startValue:m,endValue:v,curve:f}),$.sort(function(e,r){return e.lowerBound-r.lowerBound});for(var h=1;h<$.length;h++)for(var w=$[h].lowerBound,y=0;h>y;y++)if(w<$[y].upperBound)throw"Animate segments have overlapping                                 domains for the same field ("+l+").                                 At any point in the timeline, only one <animate>                                 can affect a given field on the same modifier.";var S=function(){for(var e=u.timeline()||0,r=0,n=$[r],t=0;t<$.length;t++){if(e>=$[t].lowerBound&&e<=$[t].upperBound){n=$[t];break}if(t===$.length-1){n=$[t];break}if(e>=$[t].upperBound&&e<$[t+1].lowerBound){n=$[t];break}}if(e<=n.lowerBound)return n.startValue;if(e>=n.upperBound)return n.endValue;var o=n.upperBound-n.lowerBound,a=(e-n.lowerBound)/o;if(Array.isArray(n.startValue)){for(var i=[],t=0;t<n.startValue.length;t++)i.push(n.startValue[t]+n.curve(a)*(n.endValue[t]-n.startValue[t]));return i}return n.startValue+n.curve(a)*(n.endValue-n.startValue)},C=g.transformComponents=g.transformComponents||[];"opacity"===l?i.opacityFrom(function(){return S()}):"origin"===l?i.originFrom(function(){return S()}):"size"===l?i.sizeFrom(function(){return S()}):(C.push({field:l,fn:S}),i.transformFrom(function(){for(var e={},r=s&&s()?[s()]:[],t=0;t<C.length;t++)!function(){var o=C[t].field;if(!e[o]){var a=C[t].fn();r.push(Array.isArray(a)?n[o].apply(this,a):n[o](a)),e[o]=!0}}();return 1===r.length?r[0]:n.multiply.apply(this,r)}))}})}}()},1)}}}}}]),angular.module("famous.angular").directive("faApp",["$famous","$famousDecorator",function(e,r){return{template:'<div style="display: none;"><div></div></div>',transclude:!0,scope:!0,restrict:"EA",compile:function(n,t,o){return console.log("compiled!"),{pre:function(n,t){function o(){i.apply(this,arguments)}{var a=r.ensureIsolate(n),i=e["famous/core/View"],u=e["famous/core/Engine"];e["famous/core/Transform"]}t.append('<div class="famous-angular-container"></div>'),a.context=u.createContext(t[0].querySelector(".famous-angular-container")),o.prototype=Object.create(i.prototype),o.prototype.constructor=o;a.view=new o,a.context.add(a.view),n.$on("$destroy",function(){a.context.update=angular.noop}),n.$on("registerChild",function(e,r){a.view.add(r.renderNode),e.stopPropagation()})},post:function(e,n){var t=r.ensureIsolate(e);o(e,function(e){angular.element(n[0].querySelectorAll("div div")[0]).append(e)}),t.readyToRender=!0}}}}}]),angular.module("famous.angular").directive("faClick",["$parse","$famousDecorator",function(e,r){return{restrict:"A",compile:function(){return{post:function(n,t,o){var a=r.ensureIsolate(n);if(o.faClick){var i=a.renderNode._eventInput||a.renderNode;i.on("click",function(r){var t=e(o.faClick);t(n,{$event:r}),n.$$phase||n.$apply()})}}}}}}]),angular.module("famous.angular").directive("faContainerSurface",["$famous","$famousDecorator",function(e,r){return{template:"<div></div>",restrict:"E",transclude:!0,scope:!0,compile:function(n,t,o){return{pre:function(n,t,o){var a=r.ensureIsolate(n),i=e["famous/surfaces/ContainerSurface"],u=n.$eval(o.faOptions)||{};a.renderNode=new i(u),n.$on("registerChild",function(e,r){e.targetScope.$id!=n.$id&&(a.renderNode.add(r.renderNode),e.stopPropagation())}),n.$on("unregisterChild",function(){throw"unimplemented: fa-container-surface does not support removing children"})},post:function(e,n){var t=r.ensureIsolate(e);o(e,function(e){n.find("div").append(e)}),e.$emit("registerChild",t)}}}}}]),angular.module("famous.angular").directive("faFlexibleLayout",["$famous","$famousDecorator",function(e,r){return{template:"<div></div>",restrict:"E",transclude:!0,scope:!0,compile:function(n,t,o){return{pre:function(n,t,o){var a=r.ensureIsolate(n),i=e["famous/views/FlexibleLayout"],u=(e["famous/core/ViewSequence"],[]),s=n.$eval(o.faOptions)||{};a.renderNode=new i(s);var c=function(){u.sort(function(e,r){return e.index-r.index}),a.renderNode.sequenceFrom(function(e){var r=[];return angular.forEach(e,function(e,n){r[n]=e.renderNode}),r}(u))};n.$on("registerChild",function(e,r){e.targetScope.$id!=n.$id&&(u.push(r),c(),e.stopPropagation())}),n.$on("unregisterChild",function(e,r){e.targetScope.$id!=n.$id&&(u=function(e){var n=[];return angular.forEach(e,function(e){e.id!==r.id&&n.push(e)}),n}(u),c(),e.stopPropagation())})},post:function(e,n){var t=r.ensureIsolate(e);o(e,function(e){n.find("div").append(e)}),e.$emit("registerChild",t)}}}}}]),angular.module("famous.angular").directive("faFlipper",["$famous","$famousDecorator",function(e,r){return{template:"<div></div>",restrict:"E",transclude:!0,scope:!0,compile:function(n,t,o){return{pre:function(n,t,o){var a=r.ensureIsolate(n),i=e["famous/views/Flipper"],u=n.$eval(o.faOptions)||{};a.renderNode=new i(u),a.children=[],a.flip=function(e){a.renderNode.flip(e||n.$eval(o.faOptions))},n.$on("$destroy",function(){n.$emit("unregisterChild",{id:n.$id})}),n.$on("registerChild",function(e,r){if(e.targetScope.$id!=n.$id){var t=a.children.length;if(0==t)a.renderNode.setFront(r.renderNode);else{if(1!=t)throw"fa-flipper accepts only two child elements; more than two have been provided";a.renderNode.setBack(r.renderNode)}a.children.push(r.renderNode),e.stopPropagation()}}),n.$on("unregisterChild",function(e){e.targetScope.$id!=n.$id})},post:function(e,n){var t=r.ensureIsolate(e);o(e,function(e){n.find("div").append(e)}),e.$emit("registerChild",t)}}}}}]),angular.module("famous.angular").directive("faGridLayout",["$famous","$famousDecorator",function(e,r){return{template:"<div></div>",restrict:"E",transclude:!0,scope:!0,compile:function(n,t,o){return{pre:function(n,t,o){var a=r.ensureIsolate(n),i=e["famous/views/GridLayout"],u=(e["famous/core/ViewSequence"],[]),s=n.$eval(o.faOptions)||{};a.renderNode=new i(s);var c=function(){u.sort(function(e,r){return e.index-r.index}),a.renderNode.sequenceFrom(function(e){var r=[];return angular.forEach(e,function(e,n){r[n]=e.renderNode}),r}(u))};n.$on("registerChild",function(e,r){e.targetScope.$id!=n.$id&&(u.push(r),c(),e.stopPropagation())}),n.$on("unregisterChild",function(e,r){e.targetScope.$id!=n.$id&&(u=function(e){var n=[];return angular.forEach(e,function(e){e.id!==r.id&&n.push(e)}),n}(u),c(),e.stopPropagation())})},post:function(e,n){var t=r.ensureIsolate(e);o(e,function(e){n.find("div").append(e)}),e.$emit("registerChild",t)}}}}}]),angular.module("famous.angular").directive("faHeaderFooterLayout",["$famous","$famousDecorator",function(e,r){return{template:"<div></div>",restrict:"E",transclude:!0,scope:!0,compile:function(n,t,o){var a=e["famous/views/HeaderFooterLayout"],i=e["famous/core/RenderNode"];return{pre:function(e,n,t){var o=r.ensureIsolate(e),u=(new i,new i,new i,e.$eval(t.faOptions)||{});o.renderNode=new a(u);var s=0;e.$on("registerChild",function(r,n){if(r.targetScope.$id!=e.$id){if(s++,1===s)o.renderNode.header.add(n.renderNode);else if(2===s)o.renderNode.content.add(n.renderNode);else{if(3!==s)throw"fa-header-footer-layout can accept no more than 3 children";o.renderNode.footer.add(n.renderNode)}r.stopPropagation()}}),e.$on("unregisterChild",function(){throw"unimplemented: fa-header-footer-layout does not support removing children"})},post:function(e,n){var t=r.ensureIsolate(e);o(e,function(e){n.find("div").append(e)}),e.$emit("registerChild",t)}}}}}]),angular.module("famous.angular").directive("faImageSurface",["$famous","$famousDecorator",function(e,r){return{scope:!0,template:'<div class="fa-image-surface"></div>',restrict:"EA",compile:function(){return{pre:function(n,t,o){{var a=r.ensureIsolate(n),i=e["famous/surfaces/ImageSurface"];e["famous/core/Transform"],e["famous/core/EventHandler"]}n.$watch(function(){return a.getProperties()},function(){a.renderNode&&a.renderNode.setProperties(a.getProperties())},!0);var u=function(e){return"fa"+e.charAt(0).toUpperCase()+e.slice(1)};a.getProperties=function(){for(var e=n.$eval(o.faProperties)||{},r=["backgroundColor","color"],t=0;t<r.length;t++){var a=r[t],i=u(a);o[i]&&(e[a]=n.$eval(o[i]))}return e};a.renderNode=new i({size:n.$eval(o.faSize),"class":n.$eval(o.class),properties:a.getProperties()}),o.class&&a.renderNode.setClasses(o["class"].split(" "))},post:function(e,n,t){var o=r.ensureIsolate(e),a=function(){o.renderNode.setContent(t.faImageUrl)};a(),t.$observe("faImageUrl",a),e.$emit("registerChild",o)}}}}}]),angular.module("famous.angular").directive("faIndex",["$parse","$famousDecorator",function(e,r){return{restrict:"A",scope:!1,priority:16,compile:function(){return{post:function(e,n,t){var o=r.ensureIsolate(e);o.index=e.$eval(t.faIndex),e.$watch(function(){return e.$eval(t.faIndex)},function(){o.index=e.$eval(t.faIndex)})}}}}}]),angular.module("famous.angular").directive("faModifier",["$famous","$famousDecorator","$parse",function(e,r,n){return{template:"<div></div>",transclude:!0,restrict:"EA",priority:2,scope:!0,compile:function(t,o,a){return{post:function(t,o,i){function u(e){return e.replace(p,function(e,r,n,t){return t?n.toUpperCase():n}).replace(m,"Moz$1")}function s(e){return u(e.replace(v,""))}var c=r.ensureIsolate(t),f=e["famous/core/RenderNode"],l=e["famous/core/Modifier"],d=e["famous/core/Transform"],p=/([\:\-\_]+(.))/g,m=/^moz([A-Z])/,v=/^(x[\:\-_]|data[\:\-_])/i,g=["aboutOrigin","perspective","rotate","rotateAxis","rotateX","rotateY","rotateZ","scale","skew","translate"];i.$observe("faTransformOrder",function(){var e=t.$eval(i.faTransformOrder);void 0!==e&&(g=e)});var $={};angular.forEach(g,function(e){var r=s("fa-"+e);i.$observe(r,function(){$[e]=n(i[r])})});var h=angular.noop;i.$observe("faTransform",function(){h=n(i.faTransform)}),c.getTransform=function(){var e=h(t);if(void 0!==e)return e instanceof Function?e():e instanceof Object&&void 0!==e.get?e.get():e;var r=[];return angular.forEach(g,function(e){var n=$[e]?$[e](t):void 0;void 0!==n&&(n instanceof Function&&(n=n()),r.push(n instanceof Array?d[e].apply(this,n):d[e].call(this,n)))}),r.length?1===r.length?r[0]:d.multiply.apply(this,r):void 0};var w=angular.noop;i.$observe("faAlign",function(){w=n(i.faAlign)}),c.getAlign=function(){var e=w(t);return e instanceof Function?e():e instanceof Object&&void 0!==e.get?e.get():e};var y=angular.noop;i.$observe("faOpacity",function(){y=n(i.faOpacity)}),c.getOpacity=function(){var e=y(t);return void 0===e?1:e instanceof Function?e():e instanceof Object&&void 0!==e.get?e.get():e};var S=angular.noop;i.$observe("faSize",function(){S=n(i.faSize)}),c.getSize=function(){var e=S(t);return e instanceof Function?e():e instanceof Object&&void 0!==e.get?e.get():e};var C=angular.noop;i.$observe("faOrigin",function(){C=n(i.faOrigin)}),c.getOrigin=function(){var e=C(t);return e instanceof Function?e():e instanceof Object&&void 0!==e.get?e.get():e},c.modifier=new l({transform:c.getTransform,size:c.getSize,opacity:c.getOpacity,origin:c.getOrigin,align:c.getAlign}),c.renderNode=(new f).add(c.modifier),t.$on("$destroy",function(){c.modifier.setOpacity(0),t.$emit("unregisterChild",{id:t.$id})}),t.$on("registerChild",function(e,r){e.targetScope.$id!==e.currentScope.$id&&(c.renderNode.add(r.renderNode),e.stopPropagation())}),a(t,function(e){o.find("div").append(e)}),t.$emit("registerChild",c),t.$$phase||t.$apply()}}}}}]),angular.module("famous.angular").directive("faPipeFrom",["$famous","$famousDecorator","$famousPipe",function(e,r,n){return{restrict:"A",scope:!1,priority:16,compile:function(){var t=e["famous/core/Engine"];return{post:function(e,o,a){var i=r.ensureIsolate(e);e.$watch(function(){return e.$eval(a.faPipeFrom)},function(e,r){var o=i.renderNode||t;n.unpipesFromTargets(o,r),n.pipesToTargets(o,e)}),e.$on("$destroy",function(){n.unpipesFromTargets(i.renderNode||t,e.$eval(a.faPipeFrom))})}}}}}]),angular.module("famous.angular").directive("faPipeTo",["$famous","$famousDecorator","$famousPipe",function(e,r,n){return{restrict:"A",scope:!1,priority:16,compile:function(){var t=e["famous/core/Engine"];return{post:function(e,o,a){var i=r.ensureIsolate(e);e.$watch(function(){return e.$eval(a.faPipeTo)},function(e,r){var o=i.renderNode||t;n.unpipesFromTargets(r,o),n.pipesToTargets(e,o)}),e.$on("$destroy",function(){n.unpipesFromTargets(e.$eval(a.faPipeTo),i.renderNode||t)})}}}}}]),angular.module("famous.angular").directive("faRenderNode",["$famous","$famousDecorator",function(e,r){return{template:"<div></div>",transclude:!0,scope:!0,restrict:"EA",compile:function(n,t,o){return{pre:function(n,t,o){var a=r.ensureIsolate(n),i=e["famous/core/Engine"];a.children=[],o.$observe("faPipeTo",function(e){var r=n.$eval(e);r&&i.pipe(r)}),a.renderNode=n.$eval(o.faNode),n.$on("$destroy",function(){n.$emit("unregisterChild",{id:n.$id})}),n.$on("registerChild",function(e,r){e.targetScope.$id!=n.$id&&(a.renderNode.add(r.renderNode),a.children.push(r),e.stopPropagation())})},post:function(e,n){var t=r.ensureIsolate(e);o(e,function(e){n.find("div").append(e)}),e.$emit("registerChild",t)}}}}}]),angular.module("famous.angular").directive("faRouter",["$famous","$famousDecorator","$famousState","$compile","$controller","$parse",function(e,r,n,t,o,a){return{scope:!0,transclude:"true",template:'<div class="fa-router"></div>',restrict:"EA",compile:function(i){i.html();return{pre:function(n){function t(e,r){if(console.log(r),e.targetScope.$id!==n.$id){var t=o.states[o.fromState],i=o.states[o.currentState];if(console.log("state",o.currentState,"currentView:",i),i.renderNode=r.renderNode,t&&t.renderNode)if(t.outTransitionTo){var u=a(t.outTransitionTo);u(t.$scope,{$callback:function(){o.renderNode.hide({duration:0},function(){console.log("hide completed")})}})}else o.renderNode.hide(null,function(){console.log("hide completed without transtions")});o.renderNode.show(i.renderNode,{duration:0},function(){if(i.inTransitionFrom){console.log(i.inTransitionFrom);var e=a(i.inTransitionFrom);e(i.$scope,{$callback:function(){console.log("show completed")}})}else console.log("show completed without transtions")}),e.stopPropagation()}}var o=r.ensureIsolate(n),i=e["famous/views/RenderController"],u=new i;o.renderNode=o.renderNode||u,o.states=o.states||{},o.currentState=o.currentState||"root",n.$on("registerChild",t)},post:function(e,a){function i(){if(f.currentState!==n.current){c=f.states[n.current]||n.$current,s="<fa-view>"+n.$template+"</fa-view>",a.html(s),u&&(u.$destroy(),u=null),console.log("local scope:",c.$scope,s),u=e.$new(),f.fromState=f.currentState,f.currentState=n.current,console.log(u);var r=t(a.contents());if(c.$scope=u,f.states[n.current]=c,c.controller){var i=o(c.controller,c);n.$current.controllerAs&&(u[n.$current.controllerAs]=i),angular.element(s).data("$ngControllerController",i)}r(u),u.$emit("$viewContentLoaded")}}var u,s,c,f=r.ensureIsolate(e);console.log("post:",f),e.$on("$stateChangeSuccess",i),e.$emit("registerChild",f)}}}}}]),angular.module("famous.angular").directive("faScrollView",["$famous","$famousDecorator","$timeout",function(e,r,n){return{template:"<div></div>",restrict:"E",transclude:!0,scope:!0,compile:function(t,o,a){return{pre:function(t,o,a){var i=r.ensureIsolate(t),u=e["famous/views/Scrollview"],s=e["famous/core/ViewSequence"],c=(e["famous/core/Surface"],[]),f=t.$eval(a.faOptions)||{};i.renderNode=new u(f);var l=function(e){n(function(){c.sort(function(e,r){return e.index-r.index});var r={array:function(e){var r=[];return angular.forEach(e,function(e,n){r[n]=e.renderNode}),r}(c)};e&&(r.index=t.$eval(a.faStartIndex));var n=new s(r);i.renderNode.sequenceFrom(n)})};t.$on("registerChild",function(e,r){e.targetScope.$id!=t.$id&&(c.push(r),l(!0),e.stopPropagation())}),t.$on("unregisterChild",function(e,r){e.targetScope.$id!=t.$id&&(c=function(e){var n=[];return angular.forEach(e,function(e){e.id!==r.id&&n.push(e)}),n}(c),l(),e.stopPropagation())})},post:function(e,n){var t=r.ensureIsolate(e);a(e,function(e){n.find("div").append(e)}),e.$emit("registerChild",t)}}}}}]),angular.module("famous.angular").directive("faSequentialLayout",["$famous","$famousDecorator",function(e,r){return{template:"<div></div>",restrict:"E",transclude:!0,scope:!0,compile:function(n,t,o){return window.$f=e,{pre:function(n,t,o){var a=r.ensureIsolate(n),i=e["famous/views/SequentialLayout"],u=[],s=n.$eval(o.faOptions)||{};a.renderNode=new i(s);var c=function(){u.sort(function(e,r){return e.index-r.index}),a.renderNode.sequenceFrom(function(e){var r=[];return angular.forEach(e,function(e,n){r[n]=e.renderNode}),r}(u))};n.$on("registerChild",function(e,r){e.targetScope.$id!=n.$id&&(u.push(r),c(),e.stopPropagation())}),n.$on("unregisterChild",function(e,r){e.targetScope.$id!=n.$id&&(u=function(e){var n=[];return angular.forEach(e,function(e){e.id!==r.id&&n.push(e)}),n}(u),c(),e.stopPropagation())})},post:function(e,n){var t=r.ensureIsolate(e);o(e,function(e){n.find("div").append(e)}),e.$emit("registerChild",t)}}}}}]),angular.module("famous.angular").config(["$provide","$animateProvider",function(e){e.decorator("$animate",["$delegate","$$asyncCallback","$famous",function(e,r,n){function t(e){var r=n.getIsolate(e.scope()),t=r&&r.renderNode instanceof o,a=e[0]&&"FA-SURFACE"===e[0].nodeName;return t&&a}var o=n["famous/core/Surface"];return{enabled:e.enabled,enter:e.enter,leave:e.leave,move:e.move,addClass:function(r,o,a){e.addClass(r,o,a),t(r)&&angular.forEach(o.split(" "),function(e){n.getIsolate(r.scope()).renderNode.addClass(e)})},removeClass:function(r,o,a){e.removeClass(r,o,a),t(r)&&angular.forEach(o.split(" "),function(e){n.getIsolate(r.scope()).renderNode.removeClass(e)})},setClass:function(r,o,a,i){if(e.setClass(r,o,a,i),t(r)){var u=n.getIsolate(r.scope()).renderNode;angular.forEach(o.split(" "),function(e){u.addClass(e)}),angular.forEach(a.split(" "),function(e){u.removeClass(e)})}}}}])}]).directive("faSurface",["$famous","$famousDecorator","$interpolate","$controller","$compile",function(e,r){return{scope:!0,transclude:!0,template:'<div class="fa-surface"></div>',restrict:"EA",compile:function(n,t,o){return{pre:function(n,t,o){{var a=r.ensureIsolate(n),i=e["famous/core/Surface"];e["famous/core/Transform"],e["famous/core/EventHandler"]}n.$watch(function(){return a.getProperties()},function(){a.renderNode&&a.renderNode.setProperties(a.getProperties())},!0);var u=function(e){return"fa"+e.charAt(0).toUpperCase()+e.slice(1)};a.getProperties=function(){for(var e=n.$eval(o.faProperties)||{},r=["backgroundColor","margin","padding","color"],t=0;t<r.length;t++){var a=r[t],i=u(a);o[i]&&(e[a]=n.$eval(o[i]))}return e},a.renderNode=new i({size:n.$eval(o.faSize),properties:a.getProperties()}),o.class&&a.renderNode.setClasses(o["class"].split(" ")),n.$on("$destroy",function(){n.$emit("unregisterChild",{id:n.$id})})},post:function(e,n){var t=r.ensureIsolate(e),a=function(){t.renderNode.setContent(n[0].querySelector("div.fa-surface"))};a(),o(e,function(e){angular.element(n[0].querySelectorAll("div.fa-surface")).append(e)}),e.$emit("registerChild",t)}}}}}]),angular.module("famous.angular").directive("faTap",["$parse","$famousDecorator",function(e,r){return{restrict:"A",compile:function(){return{post:function(n,t,o){var a=r.ensureIsolate(n);if(o.faTap){var i=a.renderNode._eventInput||a.renderNode,u=!1;i.on("touchmove",function(e){return u=!0,e}),i.on("touchend",function(r){if(!u){var t=e(o.faTap);t(n,{$event:r}),n.$$phase||n.$apply()}u=!1})}}}}}}]),angular.module("famous.angular").directive("faTouchend",["$parse","$famousDecorator",function(e,r){return{restrict:"A",scope:!1,compile:function(){return{post:function(n,t,o){var a=r.ensureIsolate(n);if(o.faTouchend){var i=a.renderNode._eventInput||a.renderNode;i.on("touchend",function(r){var t=e(o.faTouchend);t(n,{$event:r}),n.$$phase||n.$apply()})}}}}}}]),angular.module("famous.angular").directive("faTouchmove",["$parse","$famousDecorator",function(e,r){return{restrict:"A",scope:!1,compile:function(){return{post:function(n,t,o){var a=r.ensureIsolate(n);if(o.faTouchmove){var i=a.renderNode._eventInput||a.renderNode;i.on("touchmove",function(r){var t=e(o.faTouchmove);t(n,{$event:r}),n.$$phase||n.$apply()})}}}}}}]),angular.module("famous.angular").directive("faTouchstart",["$parse","$famousDecorator",function(e,r){return{restrict:"A",scope:!1,compile:function(){return{post:function(n,t,o){var a=r.ensureIsolate(n);if(o.faTouchstart){var i=a.renderNode._eventInput||a.renderNode;i.on("touchstart",function(r){var t=e(o.faTouchstart);t(n,{$event:r}),n.$$phase||n.$apply()})}}}}}}]),angular.module("famous.angular").directive("faView",["$famous","$famousDecorator",function(e,r){return{template:"<div></div>",transclude:!0,scope:!0,restrict:"EA",compile:function(n,t,o){var a=e["famous/core/View"];return{pre:function(e,n,t){var o=r.ensureIsolate(e);o.children=[];o.renderNode=new a({size:e.$eval(t.faSize)||[void 0,void 0]}),e.$on("$destroy",function(){e.$emit("unregisterChild",{id:e.$id})}),e.$on("registerChild",function(r,n){r.targetScope.$id!=e.$id&&(o.renderNode.add(n.renderNode),o.children.push(n),r.stopPropagation())})},post:function(e,n){var t=r.ensureIsolate(e);o(e,function(e){n.find("div").append(e)}),e.$emit("registerChild",t)}}}}}]);
>>>>>>> fedc1088aa898b65c78d472ab64131f44c74d1cc
