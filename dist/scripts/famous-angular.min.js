"use strict";window.name="NG_DEFER_BOOTSTRAP!"+window.name;var requirements=["famous/core/Engine","famous/core/EventHandler","famous/core/EventEmitter","famous/core/Modifier","famous/core/RenderNode","famous/core/Surface","famous/core/Transform","famous/core/View","famous/core/ViewSequence","famous/events/EventArbiter","famous/events/EventFilter","famous/events/EventMapper","famous/inputs/GenericSync","famous/inputs/RotateSync","famous/inputs/TouchSync","famous/inputs/MouseSync","famous/inputs/PinchSync","famous/inputs/FastClick","famous/surfaces/ImageSurface","famous/surfaces/InputSurface","famous/transitions/Easing","famous/transitions/SpringTransition","famous/transitions/Transitionable","famous/utilities/Timer","famous/views/Scrollview","famous/views/Scroller","famous/views/GridLayout"];require.config({baseUrl:"/scripts"});var ngFameApp=angular.module("famous.angular",[]);require(requirements,function(){var e=arguments;ngFameApp.provider("famous",function(){var e={};this.registerModule=function(r,n){e[r]=n};var r={};e.bag={_contents:r,register:function(e,n){r[e]?r[e].push(n):r[e]=[n]},first:function(e){var n=r[e];return n?n[0]:void 0},all:function(e){return r[e]}},this.$get=function(){return e}}),ngFameApp.config(function(r){for(var n=0;n<requirements.length;n++)r.registerModule(requirements[n],e[n])}),angular.element(document).ready(function(){angular.resumeBootstrap()})}),angular.module("famous.angular").factory("famousDecorator",function(){return{addRole:function(){},ensureIsolate:function(e){e.isolate=e.isolate||{},e.isolate[e.$id]=e.isolate[e.$id]||{};var r=e.isolate[e.$id];r.id=e.$id;var n=e.$eval("$index");return n&&"$index"!==n&&!r.index&&(r.index=n),r}}}),angular.module("famous.angular").directive("faAnimation",function(e,r){return{restrict:"EA",scope:!0,compile:function(){var n=e["famous/core/Transform"],t=e["famous/transitions/Transitionable"],a=e["famous/transitions/Easing"];return{pre:function(e){r.ensureIsolate(e)},post:function(o,i,u){var s=r.ensureIsolate(o);setTimeout(function(){var r=o.$eval(u.timeline);s._trans=new t(0),s.play=function(e){var r={duration:o.$eval(u.duration),curve:o.$eval(u.curve)||"linear"};s._trans.set(1,r,e)},s.reset=function(){s._trans.set(0)},s.replay=function(e){s.reset(),s.play(e)};var f=void 0;console.log("event",u.event),u.event&&(f&&f(),f=o.$on(u.event,function(e,r){var n=r&&r.callback?r.callback:void 0;s.replay(n)}));var c=u.id;if(e.bag.register(c,s),void 0===r&&(r=s._trans.get.bind(s._trans),u.autoplay&&s.play()),!r instanceof Function)throw"timeline must be a reference to a function or duration must be provided";for(var l=i.find("animate"),d={},p=0;p<l.length;p++)!function(){var e=l[p];if(e.attributes.targetmodselector){var t=i.parent().find(e.attributes.targetmodselector.value);_.each(t,function(t){var i=angular.element(t).scope(),u=i.isolate[i.$id].modifier,s=i.isolate[i.$id].getTransform,f=e.attributes.curve&&"linear"!==e.attributes.curve.value?a[e.attributes.curve.value]:function(e){return e};if(e.attributes.field){var c=e.attributes.field.value,l=e.attributes.timelinelowerbound?parseFloat(e.attributes.timelinelowerbound.value):0,p=e.attributes.timelineupperbound?parseFloat(e.attributes.timelineupperbound.value):1;if(!e.attributes.startvalue)throw"you must provide a start value for the animation";var v=o.$eval(e.attributes.startvalue.value);if(!e.attributes.endvalue)throw"you must provide an end value for the animation";var m=o.$eval(e.attributes.endValue.value),g=d[i.$id]=d[i.$id]||{},$=g[c]=g[c]||[];$.push({field:c,lowerBound:l,upperBound:p,startValue:v,endValue:m,curve:f}),$.sort(function(e,r){return e.lowerBound-r.lowerBound});for(var h=1;h<$.length;h++)for(var y=$[h].lowerBound,w=0;h>w;w++)if(y<$[w].upperBound)throw"Animate segments have overlapping                                 domains for the same field ("+c+").                                 At any point in the timeline, only one <animate>                                 can affect a given field on the same modifier.";var b=function(){for(var e=r()||0,n=0,t=$[n],a=0;a<$.length;a++){if(e>=$[a].lowerBound&&e<=$[a].upperBound){t=$[a];break}if(a===$.length-1){t=$[a];break}if(e>=$[a].upperBound&&e<$[a+1].lowerBound){t=$[a];break}}if(e<=t.lowerBound)return t.startValue;if(e>=t.upperBound)return t.endValue;var o=t.upperBound-t.lowerBound,i=(e-t.lowerBound)/o;if(Array.isArray(t.startValue)){for(var u=[],a=0;a<t.startValue.length;a++)u.push(t.startValue[a]+t.curve(i)*(t.endValue[a]-t.startValue[a]));return u}return t.startValue+t.curve(i)*(t.endValue-t.startValue)},N=g.transformComponents=g.transformComponents||[];"opacity"===c?u.opacityFrom(function(){return b()}):"origin"===c?u.originFrom(function(){return b()}):"size"===c?u.sizeFrom(function(){return b()}):(N.push({field:c,fn:b}),u.transformFrom(function(){for(var e=s&&s()?[s()]:[],r=0;r<N.length;r++)!function(){var t=N[r].fn(),a=N[r].field;e.push(Array.isArray(t)?n[a].apply(this,t):n[a](t))}();return 1===e.length?e[0]:n.multiply.apply(this,e)}))}})}}()},1)}}}}}),angular.module("famous.angular").directive("faApp",["famous","famousDecorator",function(e,r){return{template:'<div style="display: none;"><div></div></div>',transclude:!0,restrict:"EA",compile:function(n,t,a){return{pre:function(n,t){function a(){o.apply(this,arguments)}{var o=(r.ensureIsolate(n),e["famous/core/View"]),i=e["famous/core/Engine"];e["famous/core/Transform"]}t.append('<div class="famous-angular-container"></div>');var u=$(t.find(".famous-angular-container"))[0];n.context=i.createContext(u),a.prototype=Object.create(o.prototype),a.prototype.constructor=a;n.view=new a,n.context.add(n.view),n.$on("registerChild",function(e,r){n.view.add(r.renderNode),e.stopPropagation()})},post:function(e,r){a(e,function(e){r.find("div div").append(e)}),e.readyToRender=!0}}}}}]),angular.module("famous.angular").directive("faGridLayout",function(e,r){return{template:"<div></div>",restrict:"E",transclude:!0,scope:!0,compile:function(n,t,a){return{pre:function(n,t,a){var o=r.ensureIsolate(n),i=e["famous/views/GridLayout"],u=(e["famous/core/ViewSequence"],[]),s=n.$eval(a.faOptions)||{};o.renderNode=new i(s),a.faPipeFrom&&n.$eval(a.faPipeFrom).pipe(o.renderNode);var f=function(){u.sort(function(e,r){return e.index-r.index}),o.renderNode.sequenceFrom(_.map(u,function(e){return e.renderNode}))};n.$on("registerChild",function(e,r){e.targetScope.$id!=n.$id&&(u.push(r),f(),e.stopPropagation())}),n.$on("unregisterChild",function(e,r){e.targetScope.$id!=n.$id&&(u=_.reject(u,function(e){return e.id===r.id}),f(),e.stopPropagation())})},post:function(n,t,o){var i=r.ensureIsolate(n);a(n,function(e){t.find("div").append(e)});var u=o.id;e.bag.register(u,i),n.$emit("registerChild",i)}}}}}),angular.module("famous.angular").directive("faImageSurface",function(e,r){return{scope:!0,template:'<div class="fa-image-surface"></div>',restrict:"EA",compile:function(){return{pre:function(n,t,a){{var o=r.ensureIsolate(n),i=e["famous/surfaces/ImageSurface"];e["famous/core/Transform"],e["famous/core/EventHandler"]}n.$watch(function(){return o.getProperties()},function(){o.renderNode&&o.renderNode.setProperties(o.getProperties())},!0),o.getProperties=function(){return{backgroundColor:n.$eval(a.faBackgroundColor),color:n.$eval(a.faColor)}};o.renderNode=new i({size:n.$eval(a.faSize),"class":n.$eval(a.class),properties:o.getProperties()}),a.class&&o.renderNode.setClasses(a["class"].split(" ")),a.faClick&&o.renderNode.on("click",function(){n.$eval(a.faClick)})},post:function(n,t,a){var o=r.ensureIsolate(n),i=function(){o.renderNode.setContent(a.faImageUrl)};i(),a.$observe("faImageUrl",i);var u=a.id;e.bag.register(u,o.renderNode),n.$emit("registerChild",o)}}}}}),angular.module("famous.angular").directive("faIndex",function(e,r){return{restrict:"A",scope:!1,priority:16,compile:function(){return{post:function(e,n,t){var a=r.ensureIsolate(e);a.index=e.$eval(t.faIndex),e.$watch(function(){return e.$eval(t.faIndex)},function(){a.index=e.$eval(t.faIndex)})}}}}}),angular.module("famous.angular").directive("faModifier",["famous","famousDecorator",function(e,r){return{template:"<div></div>",transclude:!0,restrict:"EA",priority:100,scope:!0,compile:function(n,t,a){return{post:function(n,t,o){var i=r.ensureIsolate(n),u=e["famous/core/RenderNode"],s=e["famous/core/Modifier"],f=e["famous/core/Transform"],c=function(e){return e instanceof Function?e():e.get?e.get():e};i.getTransform=function(){var e=[];if(o.faTranslate){var r=n.$eval(o.faTranslate).map(c);e.push(f.translate.apply(this,r))}if(o.faRotate){var r=n.$eval(o.faRotate).map(c);e.push(f.rotate.apply(this,r))}if(o.faRotateX&&e.push(f.rotateX(c(n.$eval(o.faRotateX)))),o.faRotateY&&e.push(f.rotateY(c(n.$eval(o.faRotateY)))),o.faRotateZ&&e.push(f.rotateZ(c(n.$eval(o.faRotateZ)))),o.faScale){var r=n.$eval(o.faScale).map(c);e.push(f.scale.apply(this,r))}if(o.faSkew){var r=n.$eval(o.faSkew).map(c);e.push(f.skew.apply(this,r))}return e.length?1===e.length?e[0]:f.multiply.apply(this,e):void 0},i.getOpacity=function(){return o.faOpacity?c(n.$eval(o.faOpacity)):1},i.modifier=new s({transform:i.getTransform,size:n.$eval(o.faSize),opacity:i.getOpacity,origin:n.$eval(o.faOrigin)}),i.renderNode=(new u).add(i.modifier),n.$on("$destroy",function(){i.modifier.setOpacity(0),n.$emit("unregisterChild",{id:n.$id})}),n.$on("registerChild",function(e,r){e.targetScope.$id!==e.currentScope.$id&&(i.renderNode.add(r.renderNode),e.stopPropagation())}),a(n,function(e){t.find("div").append(e)});var l=o.id;e.bag.register(l,i),n.$emit("registerChild",i)}}}}}]),angular.module("famous.angular").directive("faPipeTo",function(e,r){return{restrict:"A",scope:!1,priority:16,compile:function(){var n=e["famous/core/Engine"];return{post:function(e,t,a){var o=r.ensureIsolate(e);e.$watch(function(){return e.$eval(a.faPipeTo)},function(e,r){console.log("updating pipes");var t=o.renderNode||n;if(r instanceof Array)for(var a=0;a<r.length;a++)t.unpipe(r[a]);else void 0!==r&&t.unpipe(r);if(e instanceof Array)for(var a=0;a<e.length;a++)t.pipe(e[a]);else void 0!==e&&t.pipe(e)})}}}}}),angular.module("famous.angular").directive("faPresenter",function(e){return{restrict:"A",scope:!1,priority:1001,compile:function(){return{pre:function(){},post:function(r,n,t){t.faPresenter&&e(t.faPresenter,{$scope:r})}}}}}),angular.module("famous.angular").directive("faRenderNode",["famous","famousDecorator",function(e,r){return{template:"<div></div>",transclude:!0,scope:!0,restrict:"EA",compile:function(n,t,a){return{pre:function(n,t,a){var o=r.ensureIsolate(n),i=e["famous/core/Engine"];o.children=[],a.$observe("faPipeTo",function(e){var r=n.$eval(e);r&&i.pipe(r)}),o.renderNode=n.$eval(a.faNode),n.$on("$destroy",function(){n.$emit("unregisterChild",{id:n.$id})}),n.$on("registerChild",function(e,r){e.targetScope.$id!=n.$id&&(o.renderNode.add(r.renderNode),o.children.push(r),e.stopPropagation())})},post:function(e,n){var t=r.ensureIsolate(e);a(e,function(e){n.find("div").append(e)}),e.$emit("registerChild",t)}}}}}]),angular.module("famous.angular").directive("faScrollView",function(e,r,n){return{template:"<div></div>",restrict:"E",transclude:!0,scope:!0,compile:function(t,a,o){return{pre:function(t,a,o){var i=r.ensureIsolate(t),u=e["famous/views/Scrollview"],s=e["famous/core/ViewSequence"],f=(e["famous/core/Surface"],[]),c=t.$eval(o.faOptions)||{};i.renderNode=new u(c),o.faPipeFrom&&t.$eval(o.faPipeFrom).pipe(i.renderNode);var l=function(e){n(function(){f.sort(function(e,r){return e.index-r.index});var r={array:_.map(f,function(e){return e.renderNode})};e&&(r.index=t.$eval(o.faStartIndex));var n=new s(r);i.renderNode.sequenceFrom(n)})};t.$on("registerChild",function(e,r){e.targetScope.$id!=t.$id&&(f.push(r),l(!0),e.stopPropagation())}),t.$on("unregisterChild",function(e,r){e.targetScope.$id!=t.$id&&(f=_.reject(f,function(e){return e.id===r.id}),l(),e.stopPropagation())})},post:function(n,t,a){var i=r.ensureIsolate(n);o(n,function(e){t.find("div").append(e)});var u=a.id;e.bag.register(u,i.renderNode),n.$emit("registerChild",i)}}}}}),angular.module("famous.angular").directive("faSurface",function(e,r,n,t,a){return{scope:!0,transclude:!0,template:'<div class="fa-surface"></div>',restrict:"EA",compile:function(n,t,o){return{pre:function(n,t,a){{var o=r.ensureIsolate(n),i=e["famous/core/Surface"];e["famous/core/Transform"],e["famous/core/EventHandler"]}n.$watch(function(){return o.getProperties()},function(){o.renderNode&&o.renderNode.setProperties(o.getProperties())},!0),o.getProperties=function(){return{backgroundColor:n.$eval(a.faBackgroundColor),color:n.$eval(a.faColor)}};var u={origin:n.$eval(a.faOrigin),translate:n.$eval(a.faTranslate),rotateZ:n.$eval(a.faRotateZ),skew:n.$eval(a.faSkew)};o.renderNode=new i({size:n.$eval(a.faSize),"class":n.$eval(a.class),properties:o.getProperties()}),a.class&&o.renderNode.setClasses(a["class"].split(" ")),o.modifier=function(){return u},a.faClick&&o.renderNode.on("click",function(){n.$eval(a.faClick)})},post:function(n,t,i){var u=r.ensureIsolate(n),s=function(){u.compiledEl=u.compiledEl||a(t.find("div.fa-surface").contents())(n);u.renderNode.setContent(u.compiledEl.context)};s(),o(n,function(e){t.find("div.fa-surface").append(e)});var f=i.id;e.bag.register(f,u.renderNode),n.$emit("registerChild",u)}}}}}),angular.module("famous.angular").directive("faTap",function(e,r){return{restrict:"A",compile:function(){return{post:function(n,t,a){var o=r.ensureIsolate(n);if(a.faTap){var i=!1,u=o.renderNode;u.on("touchmove",function(e){return i=!0,e}),u.on("touchend",function(r){if(!i){var t=e(a.faTap);t(n,{$event:r}),n.$$phase||n.$apply()}i=!1})}}}}}}),angular.module("famous.angular").directive("faTouchend",function(e,r){return{restrict:"A",scope:!1,compile:function(){return{post:function(n,t,a){var o=r.ensureIsolate(n);a.faTouchEnd&&o.renderNode.on("touchend",function(r){var t=e(a.faTouchMove);t(n,{$event:r}),n.$$phase||n.$apply()})}}}}}),angular.module("famous.angular").directive("faTouchmove",function(e,r){return{restrict:"A",scope:!1,compile:function(){return{post:function(n,t,a){var o=r.ensureIsolate(n);a.faTouchMove&&o.renderNode.on("touchmove",function(r){var t=e(a.faTouchMove);t(n,{$event:r}),n.$$phase||n.$apply()})}}}}}),angular.module("famous.angular").directive("faTouchstart",function(e,r){return{restrict:"A",scope:!1,compile:function(){return{post:function(n,t,a){var o=r.ensureIsolate(n);a.faTouchStart&&o.renderNode.on("touchstart",function(r){var t=e(a.faTouchStart);t(n,{$event:r}),n.$$phase||n.$apply()})}}}}}),angular.module("famous.angular").directive("faView",["famous","famousDecorator","$controller",function(e,r){return{template:"<div></div>",transclude:!0,scope:!0,restrict:"EA",compile:function(n,t,a){var o=e["famous/core/View"];return{pre:function(e,n,t){var a=r.ensureIsolate(e);a.children=[];a.renderNode=new o({size:e.$eval(t.faSize)||[void 0,void 0]}),e.$on("$destroy",function(){e.$emit("unregisterChild",{id:e.$id})}),e.$on("registerChild",function(r,n){r.targetScope.$id!=e.$id&&(a.renderNode.add(n.renderNode),a.children.push(n),r.stopPropagation())})},post:function(e,n){var t=r.ensureIsolate(e);a(e,function(e){n.find("div").append(e)}),e.$emit("registerChild",t)}}}}}]);